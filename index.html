<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>DINISLAM · রমজান ২০২৬</title>
    <!-- Fonts: Inter, Hind Siliguri, Noto Naskh Arabic -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,300..700&family=Hind+Siliguri:wght@300;400;500;600;700&family=Noto+Naskh+Arabic:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* ----- MODERN APP STYLE – REALISTIC PAPER TEXTURE, COMPACT, REFINED ----- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Hind Siliguri', sans-serif;
            background: #eef3f8;
            color: #1e2e3d;
            line-height: 1.4;
            min-height: 100vh;
            transition: background 0.2s, color 0.2s;
        }

        /* realistic paper texture + very faint grain */
        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background-image: 
                linear-gradient(145deg, rgba(230, 240, 248, 0.4) 0%, rgba(210, 225, 238, 0.3) 100%),
                repeating-linear-gradient(45deg, rgba(170, 160, 140, 0.02) 0px, rgba(170, 160, 140, 0.02) 2px, transparent 2px, transparent 6px);
            pointer-events: none;
            z-index: -1;
        }

        .dark-mode {
            --bg-deep: #0f1c26;
            --surface-dark: #1b2c39;
            --text-light: #e0ecf5;
            --border-subtle: #2f4455;
            background: #0c1922;
            color: #dae8f2;
        }
        .dark-mode body::before {
            background-image: linear-gradient(145deg, #14232e, #0e1a22), repeating-linear-gradient(45deg, #5e6f7c08 0px, #5e6f7c08 2px, transparent 2px, transparent 6px);
        }
        .dark-mode .card, 
        .dark-mode .modal-content, 
        .dark-mode .header, 
        .dark-mode .side-options,
        .dark-mode .dashboard-card,
        .dark-mode .hero,
        .dark-mode .zakat-card,
        .dark-mode .video-item,
        .dark-mode .tasbih-circle {
            background: #1e3342;
            color: #dae8f2;
            border-color: #314b5c;
        }

        :root {
            --primary-deep: #185e6b;
            --primary-soft: #2f8495;
            --primary-mist: #c6e3ea;
            --accent-terra: #b35f38;
            --paper-light: #fbfdff;
            --paper-warm: #f4f7fb;
            --text-main: #1d3342;
            --text-soft: #4d6377;
            --border-light: #d0dee8;
            --shadow-real: 0 12px 30px -12px rgba(30, 60, 70, 0.25);
            --shadow-elevated: 0 20px 35px -12px rgba(20, 60, 70, 0.3);
            --radius-xl: 32px;
            --radius-lg: 24px;
            --radius-md: 20px;
            --radius-sm: 16px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 14px;
        }

        /* ----- HEADER (compact) ----- */
        .header {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(16px);
            border-bottom: 1px solid rgba(210, 225, 235, 0.6);
            padding: 10px 0;
            position: sticky;
            top: 0;
            z-index: 45;
        }
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 16px;
        }
        .header-left {
            background: white;
            padding: 7px 20px;
            border-radius: 40px;
            font-size: 14px;
            font-weight: 500;
            color: var(--primary-deep);
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.02);
        }
        .header-right {
            display: flex;
            align-items: center;
            gap: 8px;
            background: white;
            padding: 4px 14px 4px 4px;
            border-radius: 36px;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(0,0,0,0.02);
        }
        .header-right img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid var(--primary-soft);
        }

        /* ----- HERO ----- */
        .hero {
            background: linear-gradient(125deg, #1b5b68, #227485);
            border-radius: var(--radius-xl);
            padding: 28px 26px;
            margin: 20px 0 24px;
            color: white;
            box-shadow: var(--shadow-elevated);
            position: relative;
            overflow: hidden;
        }
        .hero::after {
            content: "";
            position: absolute;
            inset: 0;
            background: repeating-linear-gradient(45deg, rgba(255,255,240,0.03) 0px, rgba(255,255,240,0.03) 3px, transparent 3px, transparent 8px);
            pointer-events: none;
        }
        .hero-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            z-index: 2;
        }
        .hero-year {
            font-size: 52px;
            font-weight: 700;
            line-height: 1;
        }
        .hero-date-pill {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(4px);
            border-radius: 60px;
            padding: 14px 28px;
            text-align: center;
        }
        .day-number {
            font-size: 52px;
            font-weight: 700;
            line-height: 1;
        }

        /* Timer */
        .timer-grid {
            display: flex;
            gap: 8px;
            margin-top: 28px;
        }
        .timer-item {
            background: rgba(0,0,0,0.2);
            backdrop-filter: blur(3px);
            border-radius: 40px;
            padding: 12px 0;
            flex: 1;
            text-align: center;
        }
        .timer-number {
            font-size: 24px;
            font-weight: 700;
        }
        .timer-label {
            font-size: 11px;
            opacity: 0.8;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin: 25px 0 40px;
        }
        .dashboard-card {
            background: white;
            border-radius: 22px;
            padding: 18px 4px;
            text-align: center;
            box-shadow: 0 8px 18px -12px rgba(30,60,70,0.15);
            transition: transform 0.1s, box-shadow 0.2s;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.7);
        }
        .dashboard-card:hover { transform: translateY(-3px); box-shadow: var(--shadow-real); }
        .card-icon {
            font-size: 26px;
            color: var(--primary-soft);
            margin-bottom: 5px;
        }
        .card-title {
            font-weight: 600;
            font-size: 12px;
            color: var(--text-main);
        }

        /* Side Menu */
        .side-menu-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 48px;
            height: 48px;
            border-radius: 24px;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 4px;
            cursor: pointer;
            z-index: 90;
            box-shadow: 0 10px 18px -10px rgba(20,60,70,0.4);
            border: 1px solid rgba(200,215,225,0.8);
        }
        .side-menu-button span {
            width: 20px;
            height: 2.5px;
            background: var(--primary-deep);
            border-radius: 4px;
        }
        .side-options {
            position: fixed;
            bottom: 76px;
            right: 20px;
            background: white;
            border-radius: 28px;
            padding: 8px 6px;
            display: none;
            flex-direction: column;
            gap: 4px;
            z-index: 91;
            min-width: 140px;
            box-shadow: 0 20px 30px -14px rgba(20,50,60,0.35);
            border: 1px solid rgba(210,225,235,0.8);
        }
        .side-option {
            padding: 10px 16px;
            border: none;
            border-radius: 26px;
            font-weight: 500;
            font-size: 13px;
            cursor: pointer;
            background: #ecf3f9;
            color: #1c3c4a;
            text-align: left;
        }
        .side-option i { margin-right: 12px; width: 18px; }

        /* Chat Button */
        .chat-button {
            position: fixed;
            bottom: 20px;
            right: 78px;
            width: 48px;
            height: 48px;
            border-radius: 24px;
            background: var(--primary-deep);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 90;
            border: 2px solid white;
            box-shadow: 0 8px 16px -8px #185e6b;
        }
        .chat-button i { font-size: 20px; }
        .chat-button span { font-size: 8px; font-weight: 600; margin-top: 2px; }

        .chat-window {
            position: fixed;
            bottom: 76px;
            right: 20px;
            width: 300px;
            height: 420px;
            background: white;
            border-radius: 32px;
            display: none;
            flex-direction: column;
            overflow: hidden;
            z-index: 92;
            box-shadow: 0 30px 40px -20px #1d4b58;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(30, 50, 60, 0.3);
            backdrop-filter: blur(8px);
            z-index: 200;
            align-items: center;
            justify-content: center;
            padding: 14px;
        }
        .modal-content {
            background: white;
            border-radius: 48px;
            max-width: 520px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            padding: 30px 28px;
            position: relative;
            box-shadow: var(--shadow-elevated);
            border: 1px solid rgba(255,255,255,0.7);
        }
        .modal-close {
            position: absolute;
            top: 18px;
            right: 22px;
            font-size: 28px;
            cursor: pointer;
            background: #eef3f7;
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.2s;
        }
        .modal-close:hover { background: #dae2ec; }

        /* ----- ZAKAT CALCULATOR (refined) ----- */
        .zakat-card {
            background: linear-gradient(145deg, #f6fbfe, #ecf3f9);
            border-radius: 36px;
            padding: 28px;
            margin: 20px 0;
            box-shadow: inset 0 1px 4px rgba(255,255,255,0.8), 0 10px 20px -12px #1e4a58;
        }
        .zakat-input-group {
            position: relative;
            margin: 25px 0 20px;
        }
        .zakat-input {
            width: 100%;
            padding: 20px 24px;
            border: 2px solid #d8e4ee;
            border-radius: 60px;
            font-size: 18px;
            background: white;
            transition: 0.2s;
            padding-right: 80px;
        }
        .zakat-input:focus {
            border-color: var(--primary-soft);
            outline: none;
            box-shadow: 0 0 0 4px rgba(47,132,149,0.1);
        }
        .zakat-currency {
            position: absolute;
            right: 24px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: 600;
            color: var(--primary-deep);
            background: #ecf3f9;
            padding: 6px 14px;
            border-radius: 40px;
            font-size: 16px;
        }
        .zakat-result {
            background: white;
            border-radius: 50px;
            padding: 24px;
            text-align: center;
            box-shadow: 0 5px 15px -8px #1e5a68;
        }
        .zakat-amount {
            font-size: 44px;
            font-weight: 700;
            color: var(--primary-deep);
            line-height: 1.2;
        }
        .zakat-label {
            font-size: 16px;
            color: var(--text-soft);
            margin-top: 8px;
        }

        /* ----- VIDEO SECTION (refined) ----- */
        .video-search-container {
            background: #f5fafd;
            border-radius: 40px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .search-box {
            display: flex;
            gap: 10px;
            background: white;
            border-radius: 60px;
            padding: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.02);
        }
        .search-input {
            flex: 1;
            padding: 16px 22px;
            border: none;
            border-radius: 60px;
            font-size: 16px;
            background: transparent;
        }
        .search-input:focus { outline: none; }
        .search-btn {
            background: var(--primary-deep);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 0 30px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
        }
        .search-btn:hover { background: var(--primary-soft); }
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 25px;
        }
        .video-item {
            background: white;
            border-radius: 28px;
            overflow: hidden;
            cursor: pointer;
            box-shadow: 0 12px 24px -16px #185e6b;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .video-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 18px 30px -14px #185e6b;
        }
        .video-item img {
            width: 100%;
            height: 130px;
            object-fit: cover;
        }
        .video-item .title {
            padding: 14px 12px;
            font-weight: 500;
            font-size: 14px;
            color: var(--text-main);
        }
        .player-container {
            background: #e9f2f8;
            border-radius: 36px;
            padding: 20px;
            margin-top: 20px;
        }
        .player-container iframe {
            border-radius: 28px;
            box-shadow: 0 15px 25px -12px #1a4f5c;
        }

        /* ----- TASBIH (refined, original system) ----- */
        .tasbih-container {
            background: linear-gradient(145deg, #f9fcff, #edf4fa);
            border-radius: 48px;
            padding: 24px 20px;
        }
        .tasbih-tabs {
            display: flex;
            gap: 8px;
            background: #e2eef7;
            padding: 6px;
            border-radius: 60px;
            margin-bottom: 30px;
        }
        .tasbih-tab {
            flex: 1;
            padding: 14px 8px;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 15px;
            background: transparent;
            color: #1e4a58;
            cursor: pointer;
            transition: 0.2s;
        }
        .tasbih-tab.active {
            background: white;
            color: var(--primary-deep);
            box-shadow: 0 6px 12px -8px #185e6b;
        }
        .tasbih-counter {
            width: 260px;
            height: 260px;
            margin: 0 auto 25px;
            position: relative;
            cursor: pointer;
        }
        .tasbih-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: white;
            border: 6px solid var(--primary-soft);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 15px 30px -12px #185e6b;
            transition: transform 0.2s;
        }
        .tasbih-counter:hover .tasbih-circle {
            transform: scale(1.02);
        }
        .tasbih-count {
            font-size: 64px;
            font-weight: 700;
            color: var(--primary-deep);
            line-height: 1;
        }
        .tasbih-label {
            font-size: 20px;
            color: var(--primary-soft);
            margin-top: 8px;
            font-weight: 500;
        }
        .progress-ring {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }
        .progress-ring circle {
            fill: transparent;
            stroke: var(--primary-soft);
            stroke-width: 6;
            stroke-dasharray: 816.8;
            stroke-dashoffset: 816.8;
            transition: stroke-dashoffset 0.3s;
            filter: drop-shadow(0 2px 4px rgba(47,132,149,0.3));
        }
        .tasbih-reset-btn {
            background: white;
            border: 2px solid var(--primary-soft);
            color: var(--primary-deep);
            padding: 14px 32px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 16px;
            margin-top: 15px;
            cursor: pointer;
            transition: 0.2s;
            width: auto;
            display: inline-block;
        }
        .tasbih-reset-btn:hover {
            background: var(--primary-soft);
            color: white;
        }

        /* Schedule table, Dua, Salah etc (keep existing) */
        .schedule-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 14px;
        }
        .schedule-table th {
            background: var(--primary-soft);
            color: white;
            padding: 12px 6px;
            font-weight: 500;
        }
        .schedule-table td {
            padding: 10px 6px;
            border-bottom: 1px solid var(--border-light);
            text-align: center;
        }
        .city-badge {
            display: inline-block;
            background: #e1f0f5;
            padding: 8px 20px;
            border-radius: 40px;
            margin: 5px;
            font-weight: 600;
            color: var(--primary-deep);
            cursor: pointer;
        }

        .salah-grid {
            display: grid;
            grid-template-columns: repeat(5,1fr);
            gap: 10px;
            margin: 20px 0;
        }
        .salah-item {
            background: #f0f6fc;
            border-radius: 24px;
            padding: 16px 6px;
            text-align: center;
        }
        .salah-name { font-weight: 700; font-size: 15px; }
        .salah-status { font-size: 32px; font-weight: 600; color: var(--primary-soft); }
        .salah-btn {
            background: white;
            border: 1px solid var(--primary-soft);
            border-radius: 40px;
            padding: 6px 10px;
            margin: 6px 2px;
            font-size: 13px;
            cursor: pointer;
        }

        .dua-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 55vh;
            overflow-y: auto;
            padding-right: 5px;
        }
        .dua-item {
            background: #f3f8fd;
            border-radius: 24px;
            padding: 14px 18px;
            border-left: 5px solid var(--accent-terra);
        }
        .dua-arabic {
            font-family: 'Noto Naskh Arabic', serif;
            font-size: 18px;
            direction: rtl;
            margin: 6px 0;
        }
        .dua-bangla { font-size: 14px; color: #385a6b; }

        .creator-message {
            background: #f2f7fa;
            border-radius: 28px;
            padding: 28px;
            margin: 20px 0;
            font-size: 15px;
            line-height: 1.7;
            color: #1c3e4b;
            border-left: 6px solid var(--primary-deep);
        }

        @media (max-width: 650px) {
            .dashboard-grid { grid-template-columns: repeat(3,1fr); }
        }
    </style>
</head>
<body>
    <!-- LOGIN PAGE -->
    <div id="login-page" class="login-page" style="min-height:100vh; display:flex; align-items:center; justify-content:center; background:#e2ecf3;">
        <div class="login-card" style="background:rgba(255,255,255,0.8); backdrop-filter:blur(14px); border-radius:60px; padding:48px 40px; max-width:440px; width:100%;">
            <div style="text-align:center;">
                <img src="https://i.postimg.cc/yNhjsYJ4/1771310158774-01.jpg" style="width:100px; height:100px; border-radius:50%; border:3px solid white; box-shadow:0 10px 20px -10px #185e6b;">
                <div style="font-size:42px; font-weight:700; background:linear-gradient(145deg,#185e6b,#b35f38); -webkit-background-clip:text; -webkit-text-fill-color:transparent; margin:12px 0;">DINISLAM</div>
            </div>
            <p style="text-align:center; color:#4f6f7e; margin-bottom:30px;">রমজান ২০২৬ · স্বাগতম</p>
            <div style="position:relative; margin-bottom:18px;">
                <input type="text" id="userName" class="input-field" style="width:100%; padding:16px 22px; border-radius:50px; border:2px solid #d3e2ec;" placeholder="আপনার নাম">
                <i class="fas fa-user" style="position:absolute; right:22px; top:18px; color:#7a9aac;"></i>
            </div>
            <div style="position:relative; margin-bottom:28px;">
                <input type="number" id="mobile" class="input-field" style="width:100%; padding:16px 22px; border-radius:50px; border:2px solid #d3e2ec;" placeholder="মোবাইল নম্বর">
                <i class="fas fa-phone" style="position:absolute; right:22px; top:18px; color:#7a9aac;"></i>
            </div>
            <button class="btn" onclick="login()" style="width:100%; padding:18px; background:#185e6b; color:white; border:none; border-radius:50px; font-weight:600;">প্রবেশ করুন</button>
        </div>
    </div>

    <!-- WELCOME PAGE -->
    <div id="welcome-page" style="display:none; min-height:100vh; align-items:center; justify-content:center; background:#e3eef5; padding:20px;">
        <div style="background:rgba(255,255,255,0.8); backdrop-filter:blur(14px); border-radius:70px; padding:50px 40px; max-width:550px; text-align:center;">
            <img src="https://i.postimg.cc/yNhjsYJ4/1771310158774-01.jpg" style="width:100px; border-radius:50%;">
            <div id="displayUserName" style="font-size:44px; font-weight:700; color:#185e6b; margin:16px;"></div>
            <div id="welcomeMessage" style="background:white; border-radius:40px; padding:28px; margin:25px 0; color:#2d4e5d;"></div>
            <div style="display:flex; gap:12px;">
                <button class="btn" onclick="enterMainPage()" style="flex:1; padding:16px; background:#185e6b; color:white; border-radius:50px;">প্রধান পৃষ্ঠা</button>
                <button class="btn" onclick="downloadWelcomePDF()" style="flex:1; padding:16px; background:white; color:#185e6b; border-radius:50px;">ডাউনলোড</button>
            </div>
        </div>
    </div>

    <!-- MAIN DASHBOARD -->
    <div id="dashboard" style="display:none;">
        <header class="header">
            <div class="header-content">
                <div class="header-left" onclick="openModal('creator')"><i class="fas fa-user-circle" style="margin-right:6px;"></i> Creator</div>
                <div class="header-right"><span>DINISLAM</span><img src="https://i.postimg.cc/yNhjsYJ4/1771310158774-01.jpg"></div>
            </div>
        </header>
        <div class="container">
            <div class="hero">
                <div class="hero-top">
                    <div>
                        <div style="font-size:15px; opacity:0.9;"><i class="fas fa-moon" style="margin-right:6px;"></i>পবিত্র মাহে রমজান</div>
                        <div class="hero-year">২০২৬</div>
                    </div>
                    <div class="hero-date-pill">
                        <div id="currentDateLabel" style="font-size:14px;">আজ</div>
                        <div class="day-number" id="currentDayNumber">২৯</div>
                        <div id="currentMonthName">শাবান</div>
                    </div>
                </div>
                <div class="timer-grid">
                    <div class="timer-item"><span class="timer-number" id="days">০০</span><div class="timer-label">দিন</div></div>
                    <div class="timer-item"><span class="timer-number" id="hours">০০</span><div class="timer-label">ঘণ্টা</div></div>
                    <div class="timer-item"><span class="timer-number" id="mins">০০</span><div class="timer-label">মিনিট</div></div>
                    <div class="timer-item"><span class="timer-number" id="secs">০০</span><div class="timer-label">সেকেন্ড</div></div>
                </div>
                <div style="text-align:center; margin-top:16px; font-size:15px;"><i class="fas fa-star"></i> ঈদুল ফিতর আসতে সময় বাকি</div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-card" onclick="openModal('cal')"><div class="card-icon"><i class="fas fa-calendar-alt"></i></div><div class="card-title">সময়সূচী</div></div>
                <div class="dashboard-card" onclick="openModal('dua')"><div class="card-icon"><i class="fas fa-hand-paper"></i></div><div class="card-title">দোয়া</div></div>
                <div class="dashboard-card" onclick="openModal('tas')"><div class="card-icon"><i class="fas fa-circle"></i></div><div class="card-title">তসবিহ</div></div>
                <div class="dashboard-card" onclick="openModal('zak')"><div class="card-icon"><i class="fas fa-calculator"></i></div><div class="card-title">জাকাত</div></div>
                <div class="dashboard-card" onclick="openModal('vid')"><div class="card-icon"><i class="fas fa-play-circle"></i></div><div class="card-title">ভিডিও</div></div>
                <div class="dashboard-card" onclick="openModal('salah')"><div class="card-icon"><i class="fas fa-mosque"></i></div><div class="card-title">সালাত</div></div>
            </div>
        </div>
    </div>

    <!-- CHAT + SIDE MENU -->
    <div class="chat-button" onclick="toggleChat()" id="chatButton"><i class="fas fa-comment"></i><span>ROVEX</span></div>
    <div class="chat-window" id="chatWindow">
        <div style="background:#185e6b; color:white; padding:18px; display:flex; justify-content:space-between;">
            <span><i class="fas fa-robot"></i> ROVEX</span>
            <span style="cursor:pointer; font-size:26px;" onclick="toggleChat()">×</span>
        </div>
        <div style="flex:1; padding:16px; overflow-y:auto; background:#f0f5fa;" id="chatMessages"></div>
        <div style="display:flex; padding:14px; gap:6px; background:white;">
            <input type="text" id="chatInput" placeholder="লিখুন..." style="flex:1; padding:12px 16px; border-radius:40px; border:1px solid #cbdae6;">
            <button onclick="sendMessage()" style="background:#185e6b; color:white; border:none; width:48px; border-radius:40px;"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <div class="side-menu-button" onclick="toggleSideOptions()"><span></span><span></span><span></span></div>
    <div class="side-options" id="sideOptions">
        <button class="side-option" onclick="toggleDarkMode()"><i class="fas fa-moon"></i> ডার্ক মোড</button>
        <button class="side-option" onclick="openModal('settings')"><i class="fas fa-cog"></i> সেটিংস</button>
        <button class="side-option" onclick="logout()"><i class="fas fa-sign-out-alt"></i> লগআউট</button>
    </div>

    <!-- MODAL -->
    <div id="modal" class="modal"><div class="modal-content"><span class="modal-close" onclick="closeModal()">×</span><div id="modal-body"></div></div></div>

    <script>
        (function() {
            // API KEYS
            const YOUTUBE_API_KEY = 'AIzaSyArgYYff2pvPL-MDuHNtqOIN-uMw5vkIeg';
            const GROQ_API_KEY = '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';

            // Schedule Data
            const scheduleData = {
                'ঢাকা': {sehriBase: '04:52', iftarBase: '18:05'},
                'রাজশাহী': {sehriBase: '04:58', iftarBase: '18:10'},
                'চট্টগ্রাম': {sehriBase: '04:45', iftarBase: '17:58'},
                'সিলেট': {sehriBase: '04:42', iftarBase: '17:55'},
                'খুলনা': {sehriBase: '04:55', iftarBase: '18:08'},
                'বরিশাল': {sehriBase: '04:50', iftarBase: '18:02'},
                'রংপুর': {sehriBase: '05:03', iftarBase: '18:15'},
                'ময়মনসিংহ': {sehriBase: '04:48', iftarBase: '18:00'}
            };

            // 30 Duas
            const allDuas = [
                {t:"চাঁদ দেখার দোয়া", a:"اللَّهُمَّ أَهِلَّهُ عَلَيْنَا بِالْأَمْنِ وَالْإِيمَانِ", b:"হে আল্লাহ! চাঁদকে আমাদের জন্য নিরাপত্তা ও ঈমানের সাথে উদিত করুন।"},
                {t:"রোজার নিয়ত", a:"نَوَيْتُ أَنْ أَصُومَ غَدًا لِلّٰهِ تَعَالَى", b:"আগামীকাল রমজানের রোজা রাখার নিয়ত করলাম।"},
                {t:"ইফতারের দোয়া", a:"اللَّهُمَّ لَكَ صُمْتُ وَعَلَى رِزْقِكَ أَفْطَرْتُ", b:"হে আল্লাহ! আপনার জন্য রোজা রেখেছি, আপনার রিজিকেই ইফতার করছি।"},
                {t:"ইফতারের পর দোয়া", a:"ذَهَبَ الظَّمَأُ وَابْتَلَّتِ الْعُرُوقُ", b:"পিপাসা মিটেছে, শিরা সিক্ত হয়েছে।"},
                {t:"লাইলাতুল কদরের দোয়া", a:"اللَّهُمَّ إِنَّكَ عَفُوٌّ تُحِبُّ الْعَفْوَ فَاعْفُ عَنِّي", b:"হে আল্লাহ! আপনি ক্ষমাশীল, ক্ষমা করুন।"},
                {t:"পিতামাতার দোয়া", a:"رَّبِّ ارْحَمْهُمَا كَمَا رَبَّيَانِي صَغِيرًا", b:"হে আল্লাহ! পিতামাতার প্রতি দয়া করুন।"},
                {t:"বিপদের দোয়া", a:"حَسْبُنَا اللَّهُ وَنِعْمَ الْوَكِيلُ", b:"আল্লাহই আমাদের জন্য যথেষ্ট।"},
                {t:"ক্ষমা চাওয়ার দোয়া", a:"أَسْتَغْفِرُ اللَّهَ رَبِّي مِنْ كُلِّ ذَنْبٍ", b:"আমি সব গুনাহের ক্ষমা চাই।"},
                {t:"রিযিকের দোয়া", a:"اللَّهُمَّ ارْزُقْنِي رِزْقًا حَلَالًا", b:"হে আল্লাহ! হালাল রিযিক দিন।"},
                {t:"জাহান্নাম থেকে মুক্তি", a:"اللَّهُمَّ أَجِرْنِي مِنَ النَّارِ", b:"আমাকে জাহান্নাম থেকে রক্ষা করুন।"},
                {t:"ওযুর আগের দোয়া", a:"بِسْمِ اللَّهِ", b:"আল্লাহর নামে শুরু।"},
                {t:"ওযুর পরের দোয়া", a:"أَشْهَدُ أَنْ لَا إِلَهَ إِلَّا اللَّهُ", b:"সাক্ষ্য দিচ্ছি আল্লাহ ছাড়া কোনো মাবুদ নেই।"},
                {t:"মসজিদে প্রবেশ", a:"اللَّهُمَّ افْتَحْ لِي أَبْوَابَ رَحْمَتِكَ", b:"রহমতের দরজা খুলে দিন।"},
                {t:"মসজিদ থেকে বের", a:"اللَّهُمَّ إِنِّي أَسْأَلُكَ مِنْ فَضْلِكَ", b:"আপনার অনুগ্রহ প্রার্থনা।"},
                {t:"আয়না দেখার দোয়া", a:"اللَّهُمَّ حَسَّنْتَ خَلْقِي فَحَسِّنْ خُلُقِي", b:"চরিত্র সুন্দর করুন।"},
                {t:"সফরের দোয়া", a:"سُبْحَانَ الَّذِي سَخَّرَ لَنَا هَذَا", b:"পবিত্র তিনি যিনি বশীভূত করেছেন।"},
                {t:"খাওয়ার আগে", a:"بِسْمِ اللَّهِ وَعَلَى بَرَكَةِ اللَّهِ", b:"আল্লাহর নামে ও বরকতে।"},
                {t:"খাওয়ার পরে", a:"الْحَمْدُ لِلَّهِ الَّذِي أَطْعَمَنَا", b:"প্রশংসা আল্লাহর যিনি খাইয়েছেন।"},
                {t:"ঘুমানোর দোয়া", a:"بِاسْمِكَ اللَّهُمَّ أَمُوتُ وَأَحْيَا", b:"আপনার নামে মরি ও জীবিত হই।"},
                {t:"ঘুম থেকে ওঠার দোয়া", a:"الْحَمْدُ لِلَّهِ الَّذِي أَحْيَانَا", b:"প্রশংসা যিনি জীবিত করলেন।"},
                {t:"বাথরুমে প্রবেশ", a:"اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْخُبُثِ", b:"অপবিত্র জিন থেকে আশ্রয়।"},
                {t:"বাথরুম থেকে বের", a:"غُفْرَانَكَ", b:"ক্ষমা প্রার্থনা।"},
                {t:"নতুন কাপড় পরার দোয়া", a:"الْحَمْدُ لِلَّهِ الَّذِي كَسَانِي", b:"প্রশংসা যিনি কাপড় পরিয়েছেন।"},
                {t:"রাগ দমনের দোয়া", a:"أَعُوذُ بِاللَّهِ مِنَ الشَّيْطَانِ", b:"শয়তান থেকে আশ্রয়।"},
                {t:"বৃষ্টির দোয়া", a:"اللَّهُمَّ صَيِّبًا نَافِعًا", b:"উপকারী বৃষ্টি দিন।"},
                {t:"বজ্রপাতের সময়", a:"سُبْحَانَ الَّذِي يُسَبِّحُ الرَّعْدُ", b:"পবিত্র তিনি যাঁর প্রশংসা করে বজ্র।"},
                {t:"সিজদার দোয়া", a:"سُبْحَانَ رَبِّيَ الْأَعْلَى", b:"মহান রবের পবিত্রতা।"},
                {t:"রুকুর দোয়া", a:"سُبْحَانَ رَبِّيَ الْعَظِيمِ", b:"সুমহান রবের পবিত্রতা।"},
                {t:"নামাজের শেষে", a:"رَبَّنَا آتِنَا فِي الدُّنْيَا حَسَنَةً", b:"দুনিয়া ও আখেরাতে কল্যাণ দিন।"},
                {t:"সালাম ফেরানোর দোয়া", a:"السَّلَامُ عَلَيْكُمْ وَرَحْمَةُ اللَّهِ", b:"আপনাদের প্রতি শান্তি ও রহমত বর্ষিত হোক।"}
            ];

            // Tasbih State
            let tasCount = parseInt(localStorage.getItem('tasCount')) || 0;
            let generalTasCount = parseInt(localStorage.getItem('generalTasCount')) || 0;
            let currentTasMode = 'regular';

            function getRegularLabel(count) {
                let mod = count % 33;
                if(mod < 11) return 'সুবহানাল্লাহ';
                if(mod < 22) return 'আলহামদুলিল্লাহ';
                return 'আল্লাহু আকবার';
            }

            // Salah State
            let salahCounts = JSON.parse(localStorage.getItem('salahCounts')) || [0,0,0,0,0];
            const salahNames = ['ফজর','যোহর','আসর','মাগরিব','এশা'];

            // Login Functions
            window.login = function() {
                let name = document.getElementById('userName').value.trim();
                let mobile = document.getElementById('mobile').value.trim();
                if(name && mobile.length>=11) {
                    localStorage.setItem('userName', name);
                    localStorage.setItem('userMobile', mobile);
                    document.getElementById('login-page').style.display='none';
                    document.getElementById('welcome-page').style.display='flex';
                    document.getElementById('displayUserName').innerText = name;
                    let h = new Date().getHours();
                    let g = h<12?'শুভ সকাল':h<17?'শুভ বিকাল':'শুভ সন্ধ্যা';
                    document.getElementById('welcomeMessage').innerHTML = `<p>${g} ${name},</p><p>DINISLAM-এ স্বাগতম। রমজানের সবকিছু এক ক্লিকে।</p><p style="color:#185e6b;">আল্লাহ আপনার নেক কাজ কবুল করুন।</p>`;
                } else alert('নাম ও সঠিক মোবাইল দিন');
            };
            window.enterMainPage = function() { document.getElementById('welcome-page').style.display='none'; document.getElementById('dashboard').style.display='block'; };
            window.downloadWelcomePDF = function() { alert('ডাউনলোড ফিচার'); };

            // Modal Open
            window.openModal = function(type) {
                let body = document.getElementById('modal-body');
                document.getElementById('modal').style.display='flex';
                if(type=='cal') showCal(body);
                else if(type=='dua') showDua(body);
                else if(type=='tas') renderTasUI(body);
                else if(type=='zak') showZak(body);
                else if(type=='creator') showCreator(body);
                else if(type=='vid') showVid(body);
                else if(type=='salah') showSalah(body);
                else if(type=='settings') showSettings(body);
            };

            function showCal(body) {
                let html = '<h3 style="margin-bottom:20px;">বিভাগ নির্বাচন</h3>';
                for(let city in scheduleData) {
                    html += `<span class="city-badge" onclick="showCitySchedule('${city}')">${city}</span>`;
                }
                html += '<div id="cityTable" style="margin-top:25px;"></div>';
                body.innerHTML = html;
            }
            window.showCitySchedule = function(city) {
                let data = scheduleData[city];
                let rows = '';
                for(let i=1;i<=30;i++) {
                    let sehriMin = parseInt(data.sehriBase.split(':')[1]) + (i-1);
                    if(sehriMin >= 60) sehriMin -= 60;
                    let sehri = data.sehriBase.split(':')[0] + ':' + sehriMin.toString().padStart(2,'0');
                    let iftarMin = parseInt(data.iftarBase.split(':')[1]) + (i-1);
                    if(iftarMin >= 60) iftarMin -= 60;
                    let iftar = data.iftarBase.split(':')[0] + ':' + iftarMin.toString().padStart(2,'0');
                    rows += `<tr><td>${i}</td><td>${sehri}</td><td>${iftar}</td></tr>`;
                }
                document.getElementById('cityTable').innerHTML = `<h4>${city}</h4><table class="schedule-table"><tr><th>রমজান</th><th>সেহরি</th><th>ইফতার</th></tr>${rows}</table>`;
            };

            function showDua(body) {
                let html = '<h3 style="margin-bottom:15px;">৩০টি দোয়া</h3><div class="dua-list">';
                allDuas.forEach((d,i)=>{
                    html += `<div class="dua-item"><div class="dua-title">${i+1}. ${d.t}</div><div class="dua-arabic">${d.a}</div><div class="dua-bangla">${d.b}</div></div>`;
                });
                html += '</div>';
                body.innerHTML = html;
            }

            // Tasbih UI (refined)
            function renderTasUI(body) {
                let progress = (currentTasMode == 'regular') ? (tasCount % 33) : (generalTasCount % 100);
                let max = (currentTasMode == 'regular') ? 33 : 100;
                let circumference = 2 * Math.PI * 130;
                let offset = circumference - (progress / max) * circumference;
                
                let html = `
                    <div class="tasbih-container">
                        <h3 style="text-align:center; margin-bottom:20px; font-size:24px;">ডিজিটাল তসবিহ</h3>
                        <div class="tasbih-tabs">
                            <button class="tasbih-tab ${currentTasMode == 'regular' ? 'active' : ''}" onclick="switchTasMode('regular')">নিয়মিত</button>
                            <button class="tasbih-tab ${currentTasMode == 'general' ? 'active' : ''}" onclick="switchTasMode('general')">সাধারণ</button>
                        </div>
                        
                        <div class="tasbih-counter" onclick="handleTasClick()">
                            <svg class="progress-ring" width="260" height="260">
                                <circle cx="130" cy="130" r="130" stroke="var(--primary-mist)" stroke-width="6" fill="transparent"/>
                                <circle cx="130" cy="130" r="130" stroke="var(--primary-soft)" stroke-width="6" fill="transparent" stroke-dasharray="${circumference}" stroke-dashoffset="${offset}" style="transition: stroke-dashoffset 0.3s;"/>
                            </svg>
                            <div class="tasbih-circle">
                                <div class="tasbih-count" id="tVal">${currentTasMode == 'regular' ? tasCount : generalTasCount}</div>
                                <div class="tasbih-label" id="targetLabel">${currentTasMode == 'regular' ? getRegularLabel(tasCount) : 'জিকির'}</div>
                            </div>
                        </div>
                        
                        <div style="text-align:center;">
                            <button class="tasbih-reset-btn" onclick="resetCurrentTas()"><i class="fas fa-redo" style="margin-right:8px;"></i>রিসেট</button>
                        </div>
                    </div>
                `;
                body.innerHTML = html;
            }

            window.switchTasMode = function(mode) {
                currentTasMode = mode;
                openModal('tas');
            };

            window.handleTasClick = function() {
                if(currentTasMode == 'regular') {
                    tasCount++;
                    localStorage.setItem('tasCount', tasCount);
                } else {
                    generalTasCount++;
                    localStorage.setItem('generalTasCount', generalTasCount);
                }
                if(navigator.vibrate) navigator.vibrate(30);
                openModal('tas');
            };

            window.resetCurrentTas = function() {
                if(confirm('রিসেট নিশ্চিত?')) {
                    if(currentTasMode == 'regular') {
                        tasCount = 0;
                        localStorage.setItem('tasCount', 0);
                    } else {
                        generalTasCount = 0;
                        localStorage.setItem('generalTasCount', 0);
                    }
                    openModal('tas');
                }
            };

            // Zakat UI (refined)
            function showZak(body) {
                body.innerHTML = `
                    <h3 style="text-align:center; margin-bottom:20px;">জাকাত ক্যালকুলেটর</h3>
                    <div class="zakat-card">
                        <div class="zakat-input-group">
                            <input type="number" id="zakVal" class="zakat-input" placeholder="মোট সম্পদের পরিমাণ" oninput="calcZak()">
                            <span class="zakat-currency">টাকা</span>
                        </div>
                        <div class="zakat-result">
                            <div class="zakat-amount" id="zakRes">০ টাকা</div>
                            <div class="zakat-label">জাকাত প্রদেয় (২.৫%)</div>
                        </div>
                        <p style="text-align:center; margin-top:20px; color:#5e7c8c; font-size:14px;">মোট সম্পদের ২.৫% জাকাত দিতে হবে</p>
                    </div>
                `;
            }
            window.calcZak = function() { 
                let v = document.getElementById('zakVal')?.value || 0; 
                document.getElementById('zakRes').innerText = Math.floor(v * 0.025).toLocaleString('bn-BD') + ' টাকা'; 
            };

            // Video UI (refined)
            function showVid(body) {
                body.innerHTML = `
                    <h3 style="text-align:center; margin-bottom:20px;">ইসলামিক ভিডিও</h3>
                    <div class="video-search-container">
                        <div class="search-box">
                            <input type="text" id="searchQuery" class="search-input" placeholder="যেমন: রোজার নিয়ম, দোয়া...">
                            <button class="search-btn" onclick="searchVideos()"><i class="fas fa-search" style="margin-right:6px;"></i>সার্চ</button>
                        </div>
                    </div>
                    <div id="videoResults" class="video-grid"></div>
                    <div id="videoPlayer" style="display:none; margin-top:20px;">
                        <div class="player-container" id="playerContainer"></div>
                        <button class="btn" style="margin-top:15px; background:white; color:#185e6b; border:2px solid #185e6b;" onclick="showVid(document.getElementById('modal-body'))">← ভিডিও লাইব্রেরিতে ফিরুন</button>
                    </div>
                `;
            }

            window.searchVideos = function() {
                let query = document.getElementById('searchQuery')?.value;
                if(!query) {
                    alert('অনুগ্রহ করে সার্চ টার্ম লিখুন');
                    return;
                }
                
                let resultsDiv = document.getElementById('videoResults');
                resultsDiv.innerHTML = '<div style="grid-column:1/-1; text-align:center; padding:30px;"><i class="fas fa-spinner fa-spin fa-3x" style="color:#185e6b;"></i><p style="margin-top:15px;">অনুসন্ধান চলছে...</p></div>';
                
                fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=12&q=${encodeURIComponent(query + ' ইসলামিক')}&type=video&key=${YOUTUBE_API_KEY}`)
                .then(r => r.json())
                .then(data => {
                    if(data.error) {
                        resultsDiv.innerHTML = '<div style="grid-column:1/-1; text-align:center; padding:30px;">ত্রুটি হয়েছে। API কী পরীক্ষা করুন।</div>';
                        return;
                    }
                    
                    let html = '';
                    data.items.forEach(item => {
                        html += `
                            <div class="video-item" onclick='playVideo("${item.id.videoId}", "${item.snippet.title.replace(/'/g, '')}")'>
                                <img src="${item.snippet.thumbnails.medium.url}" alt="">
                                <div class="title">${item.snippet.title.substring(0, 45)}...</div>
                            </div>
                        `;
                    });
                    
                    resultsDiv.innerHTML = html || '<div style="grid-column:1/-1; text-align:center;">কিছু পাওয়া যায়নি</div>';
                })
                .catch(() => {
                    resultsDiv.innerHTML = '<div style="grid-column:1/-1; text-align:center;">নেটওয়ার্ক সমস্যা</div>';
                });
            };

            window.playVideo = function(id, title) {
                document.getElementById('videoResults').style.display = 'none';
                let player = document.getElementById('videoPlayer');
                player.style.display = 'block';
                document.getElementById('playerContainer').innerHTML = `
                    <h4 style="margin-bottom:15px; font-size:18px;">${title}</h4>
                    <iframe width="100%" height="280" src="https://www.youtube.com/embed/${id}" frameborder="0" allowfullscreen></iframe>
                `;
            };

            // Salah Functions
            function showSalah(body) {
                let total = salahCounts.reduce((a,b)=>a+b,0);
                let html = `<h3><i class="fas fa-mosque"></i> আজকের সালাত</h3><p style="text-align:center; font-size:18px;">মোট ${total} ওয়াক্ত</p><div class="salah-grid">`;
                for(let i=0;i<5;i++) {
                    html += `<div class="salah-item"><div class="salah-name">${salahNames[i]}</div><div class="salah-status">${salahCounts[i]}</div>
                        <button class="salah-btn" onclick="markSalah(${i})">✓ পড়েছি</button>
                        <button class="salah-btn" onclick="unmarkSalah(${i})">↺ রিসেট</button>
                    </div>`;
                }
                html += `</div><button class="btn" style="margin-top:15px; padding:12px;" onclick="resetAllSalah()">সব রিসেট</button>`;
                body.innerHTML = html;
            }
            window.markSalah = function(i) { salahCounts[i]=1; localStorage.setItem('salahCounts',JSON.stringify(salahCounts)); openModal('salah'); };
            window.unmarkSalah = function(i) { salahCounts[i]=0; localStorage.setItem('salahCounts',JSON.stringify(salahCounts)); openModal('salah'); };
            window.resetAllSalah = function() { salahCounts=[0,0,0,0,0]; localStorage.setItem('salahCounts',JSON.stringify(salahCounts)); openModal('salah'); };

            // Creator Section
            function showCreator(body) {
                body.innerHTML = `
                    <div style="text-align:center;">
                        <img src="https://i.postimg.cc/yNhjsYJ4/1771310158774-01.jpg" style="width:120px; border-radius:50%; margin-bottom:16px; border:3px solid var(--primary-soft);">
                        <h2 style="color:#185e6b;">শামিউল ইসলাম বর্ষন</h2>
                        <p style="color:#5a7887; margin-bottom:24px;">Creator · DINISLAM</p>
                    </div>
                    <div class="creator-message">
                        <p style="margin-bottom:16px;">This website was created by Shamiul Islam Borson.</p>
                        <p style="margin-bottom:16px;">It is designed as a compact and complete guide for the holy month of Ramadan. The purpose of this website is to provide essential Ramadan-related information in one convenient place, making it easy for users to access everything they need.</p>
                        <p style="margin-bottom:16px;">Through this platform, I have tried to help people use their mobile phones for meaningful and beneficial purposes. Instead of spending time on unproductive activities, users can now access prayer times, guidance, duas, and important Ramadan instructions directly from their devices.</p>
                        <p style="margin-bottom:16px;">This website is built with the intention of spreading knowledge, encouraging good deeds, and making Ramadan more organized and spiritually enriching for everyone.</p>
                        <p style="font-weight:500; color:#185e6b;">May it be beneficial for all who use it.</p>
                    </div>
                    <div style="display:flex; gap:16px; justify-content:center; margin-top:24px;">
                        <a href="#" style="background:#ecf3f9; padding:12px 24px; border-radius:40px; color:#185e6b; text-decoration:none; font-weight:500;"><i class="fab fa-facebook"></i> Facebook</a>
                        <a href="#" style="background:#ecf3f9; padding:12px 24px; border-radius:40px; color:#185e6b; text-decoration:none; font-weight:500;"><i class="fab fa-github"></i> GitHub</a>
                    </div>
                `;
            }

            // Settings
            function showSettings(body) {
                body.innerHTML = `<h3>সেটিংস</h3><p>নাম: ${localStorage.getItem('userName')}</p><p>মোবাইল: ${localStorage.getItem('userMobile')}</p><button class="btn" onclick="localStorage.clear();location.reload()">ডাটা মুছুন</button>`;
            }

            // Chat Functions
            window.toggleChat = function() { 
                let c = document.getElementById('chatWindow'); 
                c.style.display = c.style.display === 'flex' ? 'none' : 'flex';
                let msgDiv = document.getElementById('chatMessages');
                if(msgDiv.children.length === 0) {
                    msgDiv.innerHTML = '<div style="background:white; padding:14px; border-radius:24px; margin-bottom:10px;">আসসালামু আলাইকুম। আমি ROVEX, আপনার ইসলামিক সহায়ক।</div>';
                }
            };

            window.sendMessage = async function() {
                let input = document.getElementById('chatInput');
                let msg = input.value.trim();
                if(!msg) return;
                
                let chatDiv = document.getElementById('chatMessages');
                chatDiv.innerHTML += `<div style="background:#185e6b; color:white; padding:12px 16px; border-radius:24px; align-self:flex-end; margin:5px 0; max-width:85%;">${msg}</div>`;
                input.value = '';
                chatDiv.scrollTop = chatDiv.scrollHeight;
                
                let typingId = 'typing-' + Date.now();
                chatDiv.innerHTML += `<div id="${typingId}" style="background:white; padding:12px 16px; border-radius:24px; align-self:flex-start; margin:5px 0;">ROVEX টাইপ করছে...</div>`;
                
                try {
                    const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${GROQ_API_KEY}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            model: 'llama-3.3-70b-versatile',
                            messages: [
                                {role: 'system', content: 'তুমি ROVEX, একটি ইসলামিক সহায়ক। সবসময় বাংলায় সংক্ষিপ্ত উত্তর দাও। কোনো ইমোজি নয়।'},
                                {role: 'user', content: msg}
                            ],
                            temperature: 0.7
                        })
                    });
                    
                    document.getElementById(typingId)?.remove();
                    const data = await response.json();
                    let reply = data.choices?.[0]?.message?.content || 'আমি বুঝতে পারিনি। আবার বলবেন?';
                    chatDiv.innerHTML += `<div style="background:white; padding:12px 16px; border-radius:24px; align-self:flex-start; margin:5px 0;">${reply}</div>`;
                } catch (error) {
                    document.getElementById(typingId)?.remove();
                    chatDiv.innerHTML += `<div style="background:white; padding:12px 16px; border-radius:24px; align-self:flex-start; margin:5px 0;">সাময়িক সমস্যা। পরে চেষ্টা করুন।</div>`;
                }
                chatDiv.scrollTop = chatDiv.scrollHeight;
            };

            // Side Menu
            window.toggleSideOptions = function() { 
                let o = document.getElementById('sideOptions'); 
                o.style.display = o.style.display === 'flex' ? 'none' : 'flex'; 
            };
            window.toggleDarkMode = function() { 
                document.body.classList.toggle('dark-mode'); 
                toggleSideOptions(); 
            };
            window.logout = function() { 
                if(confirm('লগআউট করবেন?')) {
                    localStorage.clear(); 
                    location.reload(); 
                }
            };
            window.closeModal = function() { 
                document.getElementById('modal').style.display = 'none'; 
            };

            // Timer
            function updateCurrentDate() {
                let today = new Date();
                let start = new Date("February 19, 2026 00:00:00").getTime();
                let diff = Math.ceil((start - today.getTime()) / (86400000));
                
                let dNum = document.getElementById('currentDayNumber');
                let dMonth = document.getElementById('currentMonthName');
                
                if(diff === 1) {
                    document.getElementById('currentDateLabel').innerText = 'আগামীকাল';
                    if(dNum) dNum.innerText = '১';
                    if(dMonth) dMonth.innerText = 'রমজান';
                } else if(diff <= 0) {
                    let rd = Math.abs(diff) + 1;
                    document.getElementById('currentDateLabel').innerText = 'আজ';
                    if(dNum) dNum.innerText = rd.toLocaleString('bn-BD');
                    if(dMonth) dMonth.innerText = 'রমজান';
                } else {
                    document.getElementById('currentDateLabel').innerText = 'আজ';
                    if(dNum) dNum.innerText = (30 - diff).toLocaleString('bn-BD');
                    if(dMonth) dMonth.innerText = 'শাবান';
                }
            }

            setInterval(() => {
                let target = new Date("March 20, 2026 18:15:00").getTime();
                let diff = target - new Date().getTime();
                if(document.getElementById('days')) {
                    document.getElementById('days').innerText = Math.max(0, Math.floor(diff / 86400000)).toLocaleString('bn-BD');
                    document.getElementById('hours').innerText = Math.max(0, Math.floor((diff % 86400000) / 3600000)).toLocaleString('bn-BD');
                    document.getElementById('mins').innerText = Math.max(0, Math.floor((diff % 3600000) / 60000)).toLocaleString('bn-BD');
                    document.getElementById('secs').innerText = Math.max(0, Math.floor((diff % 60000) / 1000)).toLocaleString('bn-BD');
                }
                updateCurrentDate();
            }, 1000);

            // Auto Login
            if(localStorage.getItem('userMobile') && localStorage.getItem('userName')) {
                document.getElementById('login-page').style.display = 'none';
                document.getElementById('welcome-page').style.display = 'flex';
                document.getElementById('displayUserName').innerText = localStorage.getItem('userName');
                let h = new Date().getHours();
                let g = h<12?'শুভ সকাল':h<17?'শুভ বিকাল':'শুভ সন্ধ্যা';
                document.getElementById('welcomeMessage').innerHTML = `<p>${g} ${localStorage.getItem('userName')},</p><p>DINISLAM-এ স্বাগতম। রমজানের সবকিছু এক ক্লিকে।</p><p style="color:#185e6b;">আল্লাহ আপনার নেক কাজ কবুল করুন।</p>`;
            }
        })();
    </script>
</body>
</html>
