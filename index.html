<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DINISLAM · রমজান ২০২৬</title>
    <!-- clean fonts – no emoji -->
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;600;700&family=Noto+Naskh+Arabic:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Hind Siliguri', sans-serif; transition: background 0.25s, color 0.15s; }
        body { background: #f6f3ee; color: #1f2937; min-height: 100vh; }

        /* refined earthy palette */
        :root {
            --sand: #f4efe7;
            --deep: #1e3c4f;
            --leaf: #2b6e5b;
            --clay: #b66d4b;
            --soft: #fdfaf5;
            --smoke: #e7e1d6;
            --night: #13262f;
            --paper: #ffffff;
            --ash: #5f6b7a;
        }
        .dark-mode {
            --sand: #152f3a;
            --deep: #c7b69a;
            --leaf: #7fc3b0;
            --clay: #e5987c;
            --soft: #1e2a2f;
            --smoke: #2d3c44;
            --night: #e3dbcc;
            --paper: #26353d;
            --ash: #b6b9be;
            background: #1c262b;
            color: #e9e3d8;
        }

        .container { max-width: 1000px; margin: 0 auto; padding: 16px; }

        /* login & welcome cards */
        .welcome-page { min-height: 100vh; background: var(--deep); display: flex; align-items: center; justify-content: center; padding: 20px; }
        .welcome-card { background: var(--soft); border-radius: 48px 48px 32px 32px; padding: 36px 28px; max-width: 500px; width: 100%; box-shadow: 0 20px 40px -10px #0f2a33; border: 1px solid rgba(255,255,240,0.2); }
        .welcome-logo { text-align: center; margin-bottom: 18px; }
        .welcome-logo img { width: 95px; height: 95px; border-radius: 50%; border: 4px solid var(--leaf); object-fit: cover; background: white; }
        .welcome-title { font-size: 2.4rem; font-weight: 700; text-align: center; color: var(--deep); letter-spacing: -0.5px; }
        .welcome-title span { color: var(--clay); }

        .input-line { width: 100%; padding: 16px 20px; margin-bottom: 18px; border-radius: 40px; border: 2px solid var(--smoke); background: var(--paper); font-size: 1rem; color: var(--deep); outline: none; }
        .input-line:focus { border-color: var(--leaf); }

        .btn-primary { background: var(--leaf); color: white; border: none; padding: 16px; border-radius: 40px; font-weight: 700; font-size: 1.1rem; cursor: pointer; width: 100%; box-shadow: 0 8px 12px -6px #1c4d3f; }
        .btn-secondary { background: transparent; color: var(--leaf); border: 2px solid var(--leaf); padding: 16px; border-radius: 40px; font-weight: 700; cursor: pointer; }

        .user-name-highlight { font-size: 2.5rem; font-weight: 700; color: var(--leaf); line-height: 1.2; margin-bottom: 8px; text-align: center; }
        .welcome-message { background: var(--sand); padding: 28px; border-radius: 32px; margin: 24px 0; color: var(--deep); line-height: 1.9; border-left: 8px solid var(--clay); }

        /* header clean with English titles */
        header { background: var(--deep); color: white; padding: 10px 5%; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 100; box-shadow: 0 6px 12px rgba(0,20,10,0.08); }
        .header-left { background: rgba(255,248,240,0.15); padding: 6px 18px; border-radius: 40px; font-weight: 600; font-size: 0.9rem; cursor: pointer; }
        .header-right { display: flex; align-items: center; gap: 10px; background: white; padding: 4px 15px 4px 8px; border-radius: 40px; color: var(--deep); }
        .header-right img { width: 30px; height: 30px; border-radius: 50%; border: 2px solid var(--leaf); }

        /* hero ramadan card */
        .hero { background: var(--deep); color: white; padding: 24px 22px; border-radius: 38px; margin-bottom: 25px; position: relative; overflow: hidden; }
        .hero::after { content: ''; position: absolute; top: -30px; right: -30px; width: 200px; height: 200px; background: var(--leaf); opacity: 0.1; border-radius: 40% 60% 70% 30%; }
        .hero-content { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; position: relative; z-index: 2; }
        .hero-left p { font-size: 0.95rem; letter-spacing: 0.8px; opacity: 0.8; }
        .hero-left h2 { font-size: 2.2rem; font-weight: 700; color: #ffeacc; line-height: 1; }
        .hero-right { background: rgba(255,235,210,0.12); backdrop-filter: blur(8px); padding: 12px 28px; border-radius: 48px; border: 1px solid rgba(255,245,200,0.2); text-align: center; }
        .ramadan-day-label { font-size: 0.8rem; opacity: 0.8; }
        .ramadan-day-number { font-size: 3.6rem; font-weight: 800; line-height: 1; color: var(--clay); text-shadow: 0 2px 8px #ffd7b0; }
        .eid-label { text-align: center; margin-top: 16px; font-size: 0.9rem; opacity: 0.9; }

        .timer { display: flex; justify-content: center; gap: 8px; margin-top: 16px; flex-wrap: wrap; }
        .t-box { background: rgba(255,250,240,0.1); padding: 12px 8px; border-radius: 24px; min-width: 68px; border-bottom: 4px solid var(--clay); backdrop-filter: blur(3px); text-align: center; }
        .t-box span { display: block; font-size: 1.7rem; font-weight: 700; color: var(--clay); line-height: 1; }

        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin: 25px 0; }
        .card { background: var(--paper); padding: 26px 10px; border-radius: 32px; text-align: center; cursor: pointer; box-shadow: 0 8px 14px var(--smoke); border: 1px solid transparent; transition: 0.2s; font-weight: 600; color: var(--deep); }
        .card:hover { border-color: var(--leaf); transform: scale(0.98); background: var(--soft); }

        /* modal */
        .modal { display: none; position: fixed; inset: 0; background: rgba(20,30,25,0.8); z-index: 1000; justify-content: center; align-items: center; backdrop-filter: blur(6px); }
        .modal-content { background: var(--paper); color: var(--deep); width: 92%; max-width: 600px; padding: 30px; border-radius: 44px; max-height: 80vh; overflow-y: auto; position: relative; }
        .close { position: absolute; top: 18px; right: 24px; font-size: 32px; cursor: pointer; color: var(--ash); }

        /* premium creator with English headings */
        .premium-creator { background: var(--soft); border-radius: 42px; overflow: hidden; }
        .creator-header { background: var(--deep); padding: 36px 24px 28px; text-align: center; }
        .creator-avatar { width: 130px; height: 130px; border-radius: 50%; border: 5px solid white; margin: 0 auto 16px; background: linear-gradient(145deg, var(--leaf), var(--clay)); padding: 5px; }
        .creator-avatar img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; border: 2px solid white; }
        .creator-name-premium { font-size: 2.2rem; font-weight: 800; color: white; }
        .creator-badge { background: rgba(255,255,240,0.2); padding: 8px 30px; border-radius: 40px; color: white; display: inline-block; font-weight: 500; letter-spacing: 1px; }
        .creator-content { padding: 32px; background: var(--paper); }
        .creator-quote { background: var(--sand); border-left: 6px solid var(--leaf); padding: 22px; border-radius: 24px; font-size: 1rem; line-height: 1.8; margin-bottom: 24px; }
        .creator-message { background: rgba(43,110,91,0.05); border-radius: 28px; padding: 24px; border: 1px solid var(--smoke); }
        .creator-highlight { background: var(--leaf); color: white; padding: 3px 18px; border-radius: 40px; font-weight: 600; display: inline-block; margin-right: 6px; font-size: 0.85rem; }
        .creator-stats { display: flex; gap: 12px; justify-content: center; margin: 30px 0; }
        .stat-item { background: var(--sand); padding: 16px 8px; border-radius: 28px; text-align: center; flex: 1; }
        .stat-value { font-size: 1.8rem; font-weight: 800; color: var(--leaf); }
        .social-links { display: flex; justify-content: center; gap: 18px; margin-top: 28px; }
        .social-link { width: 54px; height: 54px; border-radius: 50%; background: var(--leaf); color: white; display: flex; align-items: center; justify-content: center; text-decoration: none; font-size: 1.6rem; border: 2px solid var(--soft); transition: 0.2s; }
        .social-link:hover { background: var(--clay); transform: translateY(-5px); }
        .fb-btn-premium { background: var(--deep); color: white; text-decoration: none; padding: 16px 40px; border-radius: 40px; display: inline-block; font-weight: 600; margin-top: 16px; }

        /* dua cards */
        .dua-card { background: var(--sand); padding: 20px; border-radius: 28px; margin-bottom: 18px; border-left: 8px solid var(--leaf); text-align: left; }
        .ar { font-size: 1.4rem; text-align: right; direction: rtl; margin: 12px 0; font-family: 'Noto Naskh Arabic', serif; font-weight: 500; color: var(--deep); }

        /* table */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { background: var(--leaf); color: white; padding: 12px; font-size: 0.9rem; }
        td { padding: 12px; border-bottom: 1px solid var(--smoke); text-align: center; }

        .btn { background: var(--leaf); color: white; border: none; padding: 14px; border-radius: 30px; cursor: pointer; font-weight: 600; width: 100%; margin-top: 10px; }

        /* tasbih */
        .tasbih-container { background: var(--paper); border-radius: 48px; padding: 30px 15px; box-shadow: 0 10px 20px var(--smoke); }
        .tasbih-tabs { display: flex; gap: 6px; background: var(--sand); padding: 8px; border-radius: 60px; margin-bottom: 30px; }
        .tasbih-tab-btn { flex: 1; border: none; padding: 14px; border-radius: 50px; cursor: pointer; font-weight: 600; background: transparent; color: var(--deep); font-size: 0.9rem; }
        .tasbih-tab-btn.active { background: var(--leaf); color: white; }
        .tasbih-display { position: relative; width: 230px; height: 230px; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; }
        .tasbih-main { width: 180px; height: 180px; background: var(--sand); border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; z-index: 5; border: 5px solid var(--leaf); }
        .progress-ring-svg { position: absolute; top: 0; left: 0; width: 230px; height: 230px; transform: rotate(-90deg); }
        .progress-ring-circle { fill: transparent; stroke-width: 12; stroke-dasharray: 691; stroke-dashoffset: 691; stroke: var(--clay); transition: stroke-dashoffset 0.2s; stroke-linecap: round; }
        .progress-ring-bg { fill: transparent; stroke: var(--smoke); stroke-width: 10; }
        .t-count { font-size: 4rem; font-weight: 800; color: var(--deep); line-height: 1; }
        .t-label { font-size: 1.1rem; font-weight: 500; color: var(--leaf); }

        /* video grid */
        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; margin: 20px 0; }
        .video-card { background: var(--sand); border-radius: 24px; overflow: hidden; cursor: pointer; border: 1px solid var(--smoke); }
        .video-thumb { width: 100%; height: 100px; object-fit: cover; background: #b6afa3; }
        .video-info { padding: 12px; }
        .video-title { font-weight: 600; font-size: 0.85rem; }
        .video-channel { font-size: 0.7rem; color: var(--leaf); }

        /* ROVEX chat – clean, English brand name */
        .rovex-chat-btn { position: fixed; bottom: 100px; right: 20px; background: var(--leaf); color: white; width: 60px; height: 60px; border-radius: 30px; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer; z-index: 999; box-shadow: 0 8px 18px #1e4b3e; border: 2px solid white; font-weight: 600; font-size: 0.75rem; line-height: 1.2; }
        .chat-window { position: fixed; bottom: 180px; right: 20px; width: 310px; height: 460px; background: var(--paper); border-radius: 34px; display: none; flex-direction: column; overflow: hidden; z-index: 1000; border: 2px solid var(--leaf); }
        .chat-header { background: var(--deep); color: white; padding: 16px; display: flex; justify-content: space-between; align-items: center; }
        .chat-header h4 { font-weight: 600; letter-spacing: 0.5px; }
        .close-chat { background: none; border: none; color: white; font-size: 2rem; cursor: pointer; line-height: 1; }
        .chat-messages { flex: 1; padding: 16px; overflow-y: auto; background: var(--sand); display: flex; flex-direction: column; gap: 10px; }
        .message { padding: 14px; border-radius: 24px; max-width: 85%; font-size: 0.9rem; line-height: 1.4; }
        .user-message { background: var(--leaf); color: white; align-self: flex-end; border-bottom-right-radius: 6px; }
        .bot-message { background: var(--paper); color: var(--deep); align-self: flex-start; border-bottom-left-radius: 6px; border: 1px solid var(--smoke); }
        .chat-input-area { padding: 14px; background: var(--paper); display: flex; gap: 8px; border-top: 1px solid var(--smoke); }
        .chat-input-area input { flex: 1; padding: 14px; border-radius: 40px; border: 2px solid var(--smoke); background: var(--soft); outline: none; }
        .chat-input-area button { background: var(--leaf); color: white; border: none; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; font-size: 1.2rem; }
        .suggested-q { background: white; color: var(--deep); padding: 6px 12px; border-radius: 30px; font-size: 0.75rem; cursor: pointer; border: 1px solid var(--leaf); display: inline-block; margin: 3px; }

        .side-menu-btn { position: fixed; bottom: 30px; right: 20px; background: var(--deep); color: white; width: 55px; height: 55px; border-radius: 18px; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 4px; cursor: pointer; z-index: 1000; }
        .side-menu-btn span { display: block; width: 24px; height: 3px; background: white; border-radius: 2px; }
        #sideOptions { position: fixed; bottom: 95px; right: 20px; background: white; padding: 14px; border-radius: 28px; display: none; flex-direction: column; gap: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); z-index: 1001; }
        #sideOptions button { border: none; background: var(--leaf); color: white; padding: 10px 18px; border-radius: 30px; cursor: pointer; font-weight: 600; }
        #sideOptions button:last-child { background: #b15e4b; }
    </style>
</head>
<body>
    <!-- LOGIN PAGE -->
    <div id="login-page">
        <div class="welcome-page">
            <div class="welcome-card">
                <div class="welcome-logo">
                    <img src="https://i.postimg.cc/yNhjsYJ4/1771310158774_01.jpg" alt="DINISLAM">
                </div>
                <div class="welcome-title"><span>DINI</span>SLAM</div>
                <p style="text-align:center; margin:20px 0 10px;">রমজান ২০২৬ · আপনার তথ্য</p>
                <input type="text" id="userName" class="input-line" placeholder="আপনার নাম">
                <input type="number" id="mobile" class="input-line" placeholder="মোবাইল নম্বর">
                <button class="btn-primary" onclick="login()">প্রবেশ করুন</button>
            </div>
        </div>
    </div>

    <!-- WELCOME PAGE -->
    <div id="welcome-page" style="display:none;">
        <div class="welcome-page">
            <div class="welcome-card">
                <div class="welcome-logo">
                    <img src="https://i.postimg.cc/yNhjsYJ4/1771310158774_01.jpg" alt="DINISLAM">
                </div>
                <div class="user-name-highlight" id="displayUserName"></div>
                <div class="welcome-message" id="welcomeMessage"></div>
                <div style="display:flex; flex-direction:column; gap:12px;">
                    <button class="btn-primary" onclick="enterMainPage()">প্রধান পৃষ্ঠা</button>
                    <button class="btn-secondary" onclick="downloadWelcomePDF()">ডাউনলোড (পিডিএফ)</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN DASHBOARD -->
    <div id="dashboard" style="display:none;">
        <header>
            <!-- English: Creator Info -->
            <div class="header-left" onclick="openModal('creator')">Creator Info</div>
            <div class="header-right">
                <span style="font-weight:700;">DINISLAM</span>
                <img src="https://i.postimg.cc/yNhjsYJ4/1771310158774_01.jpg">
            </div>
        </header>

        <div class="container">
            <div class="hero">
                <div class="hero-content">
                    <div class="hero-left">
                        <p>পবিত্র মাহে রমজান</p>
                        <h2>২০২৬</h2>
                    </div>
                    <div class="hero-right">
                        <div class="ramadan-day-label" id="currentDateLabel">আজ</div>
                        <div class="ramadan-day-number" id="currentDayNumber">২৯</div>
                        <div class="ramadan-day-text" id="currentMonthName">শাবান</div>
                    </div>
                </div>
                <div class="timer">
                    <div class="t-box"><span id="days">০০</span><small>দিন</small></div>
                    <div class="t-box"><span id="hours">০০</span><small>ঘণ্টা</small></div>
                    <div class="t-box"><span id="mins">০০</span><small>মিনিট</small></div>
                    <div class="t-box"><span id="secs">০০</span><small>সেকেন্ড</small></div>
                </div>
                <div class="eid-label">ঈদুল ফিতর আসতে সময় বাকি</div>
            </div>

            <div class="grid">
                <div class="card" onclick="openModal('cal')">সময়সূচী</div>
                <div class="card" onclick="openModal('dua')">দোয়া</div>
                <div class="card" onclick="openModal('tas')">তসবিহ</div>
                <div class="card" onclick="openModal('zak')">জাকাত</div>
                <div class="card" onclick="openModal('vid')">ভিডিও</div>
            </div>
        </div>
    </div>

    <!-- ROVEX CHAT (English brand) -->
    <div class="rovex-chat-btn" onclick="toggleChat()">
        <i class="fas fa-comment-dots"></i>
        <span>ROVEX</span>
    </div>
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <h4>ROVEX · ইসলামিক সহায়ক</h4>
            <button class="close-chat" onclick="toggleChat()">×</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">আসসালামু আলাইকুম।
আমি ROVex, আপনার ইসলামিক AI সহকারী। কুরআন, হাদিস ও দ্বীনি বিষয়ে যেকোনো প্রশ্নে সাহায্য করতে প্রস্তুত আছি। কীভাবে আপনাকে সাহায্য করতে পারি?</div>
        </div>
        <div class="chat-input-area">
            <input type="text" id="chatInput" placeholder="লিখুন...">
            <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <!-- SIDE MENU -->
    <div class="side-menu-btn" onclick="toggleSideOptions()">
        <span></span><span></span><span></span>
    </div>
    <div id="sideOptions">
        <button onclick="toggleDarkMode()">ডার্ক মোড</button>
        <button onclick="logout()">লগআউট</button>
    </div>

    <!-- MODAL -->
    <div id="modal" class="modal" onclick="if(event.target == this) closeModal()">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">×</span>
            <div id="modal-body"></div>
        </div>
    </div>

    <script>
        (function() {
            // ---------- DATA ----------
            function generateData(sH, sM, iH, iM) {
                let res = [];
                let dates = ["১৯ ফেব", "২০ ফেব", "২১ ফেব", "২২ ফেব", "২৩ ফেব", "২৪ ফেব", "২৫ ফেব", "২৬ ফেব", "২৭ ফেব", "২৮ ফেব", "০১ মার্চ", "০২ মার্চ", "০৩ মার্চ", "০৪ মার্চ", "০৫ মার্চ", "০৬ মার্চ", "০৭ মার্চ", "০৮ মার্চ", "০৯ মার্চ", "১০ মার্চ", "১১ মার্চ", "১২ মার্চ", "১৩ মার্চ", "১৪ মার্চ", "১৫ মার্চ", "১৬ মার্চ", "১৭ মার্চ", "১৮ মার্চ", "১৯ মার্চ", "২০ মার্চ"];
                for(let i=0;i<30;i++) {
                    let sTotal = sM - i; let sHr = sH; if(sTotal < 0) { sHr--; sTotal += 60; }
                    let iTotal = iM + i; let iHr = iH; if(iTotal >= 60) { iHr++; iTotal -= 60; }
                    res.push({ r: (i+1).toLocaleString('bn-BD'), d: dates[i], s: sHr.toLocaleString('bn-BD')+":"+sTotal.toString().padStart(2,'0').toLocaleString('bn-BD'), i: iHr.toLocaleString('bn-BD')+":"+iTotal.toString().padStart(2,'0').toLocaleString('bn-BD') });
                }
                return res;
            }
            const ramadanData = {
                'ঢাকা': generateData(5,19,18,5),'রাজশাহী': generateData(5,18,18,4),'চট্টগ্রাম': generateData(5,5,17,53),
                'সিলেট': generateData(5,4,17,50),'খুলনা': generateData(5,15,18,2),'বরিশাল': generateData(5,11,17,59),
                'রংপুর': generateData(5,17,18,0),'ময়মনসিংহ': generateData(5,14,18,2)
            };
            const allDuas = [
                {t:"১. চাঁদ দেখার দোয়া", a:"اللَّهُمَّ أَهِلَّهُ عَلَيْنَا بِالْأَمْنِ وَالْإِيمَانِ وَالسَّلَامَةِ وَالْإِسْلَامِ", b:"হে আল্লাহ! চাঁদকে আমাদের নিরাপত্তা, ঈমান, শান্তি ও ইসলামের সাথে উদিত করুন।"},
                {t:"২. রোজার নিয়ত", a:"نَوَيْتُ أَنْ أَصُومَ غَدًا لِلّٰهِ تَعَالَى مِنْ شَهْرِ رَمَضَانَ", b:"আগামীকাল রমজানের রোজা রাখার নিয়ত করলাম।"},
                {t:"৩. ইফতারের দোয়া", a:"اللَّهُمَّ لَكَ صُمْتُ وَعَلَى رِزْقِكَ أَفْطَرْتُ", b:"হে আল্লাহ! আপনার জন্য রোজা রেখেছি এবং আপনার রিজিকেই ইফতার করছি।"},
                {t:"৪. ইফতারের পর দোয়া", a:"ذَهَبَ الظَّمَأُ وَابْتَلَّتِ الْعُرُوقُ وَثَبَتَ الْأَجْرُ إِنْ شَاءَ اللَّهُ", b:"পিপাসা মিটেছে, শিরাসমূহ সিক্ত হয়েছে এবং আল্লাহ চাইলে পুরস্কার নির্ধারিত হয়েছে।"},
                {t:"৫. লাইলাতুল কদরের দোয়া", a:"اللَّهُمَّ إِنَّكَ عَفُوٌّ تُحِبُّ الْعَفْوَ فَاعْفُ عَنِّي", b:"হে আল্লাহ! আপনি ক্ষমাশীল, আপনি ক্ষমা করতে পছন্দ করেন, তাই আমাকে ক্ষমা করুন।"},
                {t:"৬. পিতামাতার দোয়া", a:"رَّبِّ ارْحَمْهُمَا كَمَا رَبَّيَانِي صَغِيرًا", b:"হে আল্লাহ! আমার পিতামাতার প্রতি দয়া করুন।"},
                {t:"৭. বিপদের দোয়া", a:"حَسْبُنَا اللَّهُ وَنِعْمَ الْوَكِيلُ", b:"আল্লাহই আমাদের জন্য যথেষ্ট।"},
                {t:"৮. ক্ষমা চাওয়ার দোয়া", a:"أَسْتَغْفِرُ اللَّهَ رَبِّي مِنْ كُلِّ ذَنْبٍ وَأَتُوبُ إِلَيْهِ", b:"আমি আমার রবের কাছে সব গুনাহের ক্ষমা চাই।"},
                {t:"৯. রিযিকের দোয়া", a:"اللَّهُمَّ ارْزُقْنِي رِزْقًا حَلَالًا طَيِّبًا", b:"হে আল্লাহ! আমাকে হালাল রিযিক দিন।"},
                {t:"১০. জাহান্নাম থেকে মুক্তি", a:"اللَّهُمَّ أَجِرْنِي مِنَ النَّارِ", b:"হে আল্লাহ! আমাকে জাহান্নাম থেকে রক্ষা করুন।"},
                {t:"১১. ওযুর আগের দোয়া", a:"بِسْمِ اللَّهِ", b:"আল্লাহর নামে শুরু করছি।"},
                {t:"১২. ওযুর পরের দোয়া", a:"أَشْهَدُ أَنْ لَا إِلَهَ إِلَّا اللَّهُ وَأَشْهَدُ أَنَّ مُحَمَّدًا عَبْدُهُ وَرَسُولُهُ", b:"সাক্ষ্য দিচ্ছি আল্লাহ ছাড়া কোনো মাবুদ নেই।"},
                {t:"১৩. মসজিদে প্রবেশের দোয়া", a:"اللَّهُمَّ افْتَحْ لِي أَبْوَابَ رَحْمَتِكَ", b:"হে আল্লাহ! রহমতের দরজা খুলে দিন।"},
                {t:"১৪. মসজিদ থেকে বের হওয়ার দোয়া", a:"اللَّهُمَّ إِنِّي أَسْأَلُكَ مِنْ فَضْلِكَ", b:"হে আল্লাহ! আপনার অনুগ্রহ প্রার্থনা করছি।"},
                {t:"১৫. আয়না দেখার দোয়া", a:"اللَّهُمَّ حَسَّنتَ خَلْقِي فَحَسِّنْ خُلُقِي", b:"হে আল্লাহ! চরিত্র সুন্দর করুন।"},
                {t:"১৬. সফরের দোয়া", a:"سُبْحَانَ الَّذِي سَخَّرَ لَنَا هَذَا", b:"পবিত্র তিনি যিনি এগুলো আমাদের বশীভূত করেছেন।"},
                {t:"১৭. খাওয়ার আগের দোয়া", a:"بِسْمِ اللَّهِ وَعَلَى بَرَكَةِ اللَّهِ", b:"আল্লাহর নামে ও বরকতে।"},
                {t:"১৮. খাওয়ার পরের দোয়া", a:"الْحَمْدُ لِلَّهِ الَّذِي أَطْعَمَنَا", b:"প্রশংসা আল্লাহর যিনি খাইয়েছেন।"},
                {t:"১৯. ঘুমানোর দোয়া", a:"بِاسْمِكَ اللَّهُمَّ أَمُوتُ وَأَحْيَا", b:"আপনার নামে মরি ও জীবিত হই।"},
                {t:"২০. ঘুম থেকে ওঠার দোয়া", a:"الْحَمْدُ لِلَّهِ الَّذِي أَحْيَانَا", b:"প্রশংসা আল্লাহর যিনি জীবিত করলেন।"},
                {t:"২১. বাথরুম প্রবেশের দোয়া", a:"اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْخُبُثِ", b:"অপবিত্র জিন থেকে আশ্রয় চাই।"},
                {t:"২২. বাথরুম থেকে বের হওয়ার দোয়া", a:"غُفْرَانَكَ", b:"ক্ষমা প্রার্থনা করছি।"},
                {t:"২৩. নতুন কাপড় পরার দোয়া", a:"الْحَمْدُ لِلَّهِ الَّذِي كَسَانِي", b:"প্রশংসা যিনি আমাকে কাপড় পরিয়েছেন।"},
                {t:"২৪. রাগ দমনের দোয়া", a:"أَعُوذُ بِاللَّهِ مِنَ الشَّيْطَانِ", b:"শয়তান থেকে আল্লাহর আশ্রয়।"},
                {t:"২৫. বৃষ্টির দোয়া", a:"اللَّهُمَّ صَيِّبًا نَافِعًا", b:"হে আল্লাহ! উপকারী বৃষ্টি দিন।"},
                {t:"২৬. বজ্রপাতের সময় দোয়া", a:"سُبْحَانَ الَّذِي يُسَبِّحُ الرَّعْدُ", b:"পবিত্র তিনি যাঁর প্রশংসা বজ্র করে।"},
                {t:"২৭. সিজদার দোয়া", a:"سُبْحَانَ رَبِّيَ الْأَعْلَى", b:"মহান রবের পবিত্রতা।"},
                {t:"২৮. রুকুর দোয়া", a:"سُبْحَانَ رَبِّيَ الْعَظِيمِ", b:"সুমহান রবের পবিত্রতা।"},
                {t:"২৯. নামাজের শেষে দোয়া", a:"رَبَّنَا آتِنَا فِي الدُّنْيَا حَسَنَةً", b:"হে আমাদের রব! দুনিয়া ও আখেরাতে কল্যাণ দিন।"},
                {t:"৩০. সালাম ফেরানোর দোয়া", a:"السَّلَامُ عَلَيْكُمْ وَرَحْمَةُ اللَّهِ", b:"আপনাদের প্রতি শান্তি ও আল্লাহর রহমত বর্ষিত হোক।"}
            ];

            // tasbih
            let tasCount = parseInt(localStorage.getItem('tasCount')) || 0;
            let generalTasCount = parseInt(localStorage.getItem('generalTasCount')) || 0;
            let currentTasMode = 'regular';

            function getRegularLabel(c) { let m = c % 100; if(m<=33) return 'সুবহানাল্লাহ'; if(m<=66) return 'আলহামদুলিল্লাহ'; return 'আল্লাহু আকবার'; }

            // ---- functions ----
            window.login = function() {
                let name = document.getElementById('userName').value.trim();
                let mobile = document.getElementById('mobile').value.trim();
                if(name && mobile.length >= 6) {
                    localStorage.setItem('userName', name);
                    localStorage.setItem('userMobile', mobile);
                    document.getElementById('login-page').style.display = 'none';
                    document.getElementById('welcome-page').style.display = 'block';
                    document.getElementById('displayUserName').innerText = name;
                    let h = new Date().getHours();
                    let g = (h<12?'শুভ সকাল':h<17?'শুভ বিকাল':'শুভ সন্ধ্যা');
                    document.getElementById('welcomeMessage').innerHTML = `<p>${g} ${name},</p><p>DINISLAM প্ল্যাটফর্মে আপনাকে স্বাগতম। রমজানের সময়সূচি, দোয়া ও তসবিহ এক ক্লিকেই পাবেন।</p><p>আল্লাহ আপনার সব নেক কাজ কবুল করুন।</p>`;
                } else alert('নাম ও সঠিক মোবাইল নম্বর দিন');
            };
            window.enterMainPage = function() { document.getElementById('welcome-page').style.display='none'; document.getElementById('dashboard').style.display='block'; };
            window.downloadWelcomePDF = function() {
                let name = localStorage.getItem('userName')||'ভাই';
                let blob = new Blob([`DINISLAM - রমজান ২০২৬\nপ্রিয় ${name},\nআপনাকে স্বাগতম। সম্পূর্ণ সময়সূচি, দোয়া ও তসবিহ অ্যাপে দেখুন।`], {type:'text/plain'});
                let a = document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='welcome_dinislam.txt'; a.click();
            };
            window.openModal = function(t) {
                let body = document.getElementById('modal-body');
                document.getElementById('modal').style.display = 'flex';
                if(t=='cal') {
                    let h = '<h3 style="margin-bottom:20px;">বিভাগ নির্বাচন করুন</h3>';
                    Object.keys(ramadanData).forEach(d=> h+=`<button class="btn" onclick="showTable('${d}')">${d}</button>`);
                    body.innerHTML = h;
                } else if(t=='dua') {
                    let h = '<h3>প্রয়োজনীয় দোয়া (৩০টি)</h3>';
                    allDuas.forEach(d=> h+=`<div class="dua-card"><b>${d.t}</b><p class="ar">${d.a}</p><p>${d.b}</p></div>`);
                    body.innerHTML = h;
                } else if(t=='tas') renderTasUI();
                else if(t=='zak') body.innerHTML = `<h3>জাকাত ক্যালকুলেটর</h3><input type="number" id="cash" class="input-line" placeholder="মোট সম্পদ (টাকা)" oninput="liveZak()"><div class="hero" style="padding:20px;"><small>জাকাতের পরিমাণ</small><h2 id="zRes">০ টাকা</h2></div>`;
                else if(t=='creator') showPremiumCreator();
                else if(t=='vid') showVideoSearch();
            };
            window.showTable = function(div) {
                let h = `<h3>${div} · সেহরি ও ইফতার</h3><table><tr><th>রমজান</th><th>তারিখ</th><th>সেহরি</th><th>ইফতার</th></tr>`;
                ramadanData[div].forEach(r=> h+=`<tr><td>${r.r}</td><td>${r.d}</td><td style="color:var(--clay);">${r.s}</td><td style="color:var(--leaf);">${r.i}</td></tr>`);
                document.getElementById('modal-body').innerHTML = h + `</table><button class="btn" onclick="openModal('cal')">পিছনে</button>`;
            };
            function showPremiumCreator() {
                document.getElementById('modal-body').innerHTML = `
                    <div class="premium-creator">
                        <div class="creator-header"><div class="creator-avatar"><img src="https://i.postimg.cc/yNhjsYJ4/1771310158774_01.jpg"></div><div class="creator-name-premium">শামিউল ইসলাম বর্ষন</div><div class="creator-badge">Creator · DINISLAM</div></div>
                        <div class="creator-content">
                            <div class="creator-quote">“Building meaningful digital experiences for the Ummah”</div>
                            <div class="creator-message"><p><span class="creator-highlight">DINISLAM</span> is designed as a compact guide for Ramadan — Sehri/Iftar times, duas, tasbih and beneficial videos.</p><p>May this effort be a source of blessings.</p></div>
                            <div class="creator-stats"><div class="stat-item"><div class="stat-value">৮+</div><div class="stat-label">Projects</div></div><div class="stat-item"><div class="stat-value">১০০০+</div><div class="stat-label">Users</div></div><div class="stat-item"><div class="stat-value">২৪/৭</div><div class="stat-label">Support</div></div></div>
                            <div class="social-links"><a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a><a href="#" class="social-link"><i class="fab fa-github"></i></a><a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a></div>
                            <a href="https://fb.com/SI.Borson1" target="_blank" class="fb-btn-premium">Facebook Profile</a>
                        </div>
                    </div>`;
            }
            window.showVideoSearch = function() {
                document.getElementById('modal-body').innerHTML = `<h3>ইসলামিক ভিডিও সার্চ করুন</h3><div style="display:flex;gap:10px;margin:20px 0;"><input type="text" id="searchQuery" class="input-line" placeholder="যেমন: রোজার নিয়ম, দোয়া"><button class="btn" style="width:auto;padding:14px 25px;" onclick="searchVideos()">খুঁজুন</button></div><div id="videoResults" class="video-grid"></div><div id="videoPlayer" style="display:none;"><div id="playerContainer"></div><button class="btn" onclick="showVideoSearch()">ফিরে যান</button></div>`;
            };
            window.searchVideos = function() {
                let q = document.getElementById('searchQuery').value; if(!q) return;
                document.getElementById('videoResults').innerHTML = '<div style="grid-column:1/-1;text-align:center;">অপেক্ষা করুন...</div>';
                fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=12&q=${encodeURIComponent(q)}&type=video&key=AIzaSyArgYYff2pvPL-MDuHNtqOIN-uMw5vkIeg`)
                .then(r=>r.json()).then(d=>{
                    if(d.error) { document.getElementById('videoResults').innerHTML = '<div>ত্রুটি</div>'; return; }
                    let h=''; d.items.forEach(i=>{ h+=`<div class="video-card" onclick='playVideo("${i.id.videoId}","${i.snippet.title.replace(/'/g,'')}")'><img src="${i.snippet.thumbnails.medium.url}" class="video-thumb"><div class="video-info"><div class="video-title">${i.snippet.title.substring(0,40)}</div><div class="video-channel">${i.snippet.channelTitle}</div></div></div>`; });
                    document.getElementById('videoResults').innerHTML = h||'<div>কিছু পাওয়া যায়নি</div>';
                }).catch(()=>document.getElementById('videoResults').innerHTML='<div>নেটওয়ার্ক সমস্যা</div>');
            };
            window.playVideo = function(id,title) {
                document.getElementById('videoResults').style.display='none';
                let p = document.getElementById('videoPlayer'); p.style.display='block';
                document.getElementById('playerContainer').innerHTML = `<h4 style="margin-bottom:12px;">${title}</h4><iframe width="100%" height="240" src="https://www.youtube.com/embed/${id}" frameborder="0" style="border-radius:24px;" allowfullscreen></iframe>`;
            };
            function renderTasUI() {
                let b = document.getElementById('modal-body');
                b.innerHTML = `<div class="tasbih-container"><div class="tasbih-tabs"><button class="tasbih-tab-btn ${currentTasMode=='regular'?'active':''}" onclick="switchTasMode('regular')">নিয়মিত</button><button class="tasbih-tab-btn ${currentTasMode=='general'?'active':''}" onclick="switchTasMode('general')">সাধারণ</button></div><div class="tasbih-display"><svg class="progress-ring-svg"><circle class="progress-ring-bg" cx="115" cy="115" r="100"></circle><circle class="progress-ring-circle" id="pBar" cx="115" cy="115" r="100"></circle></svg><div class="tasbih-main" onclick="handleTasClick()"><h1 id="tVal" class="t-count">${currentTasMode=='regular'?tasCount:generalTasCount}</h1><p id="targetLabel" class="t-label">${currentTasMode=='regular'?getRegularLabel(tasCount):'জিকির'}</p></div></div><button class="btn" style="background:var(--clay);" onclick="resetCurrentTas()">রিসেট</button></div>`;
                updateTasProgress();
            }
            window.switchTasMode = function(m){ currentTasMode=m; renderTasUI(); };
            window.handleTasClick = function(){
                if(currentTasMode=='regular'){ tasCount++; localStorage.setItem('tasCount',tasCount); document.getElementById('tVal').innerText=tasCount; document.getElementById('targetLabel').innerText=getRegularLabel(tasCount); }
                else { generalTasCount++; localStorage.setItem('generalTasCount',generalTasCount); document.getElementById('tVal').innerText=generalTasCount; }
                updateTasProgress(); if(navigator.vibrate) navigator.vibrate(30);
            };
            window.resetCurrentTas = function(){
                if(confirm('রিসেট নিশ্চিত?')) {
                    if(currentTasMode=='regular'){ tasCount=0; localStorage.setItem('tasCount',0); }
                    else { generalTasCount=0; localStorage.setItem('generalTasCount',0); }
                    renderTasUI();
                }
            };
            function updateTasProgress(){
                let bar=document.getElementById('pBar'); if(!bar) return;
                let c = (currentTasMode=='regular') ? (tasCount%33||33) : (generalTasCount%100||100);
                let max = (currentTasMode=='regular'?33:100);
                let r=100; let circum=2*Math.PI*r; bar.style.strokeDasharray=circum; bar.style.strokeDashoffset=circum - (c/max)*circum;
            }
            window.liveZak = function() { let v=document.getElementById('cash')?.value||0; document.getElementById('zRes').innerText=Math.floor(v*0.025).toLocaleString('bn-BD')+' টাকা'; };
            window.toggleSideOptions = function() { let s=document.getElementById('sideOptions'); s.style.display = s.style.display==='flex'?'none':'flex'; };
            window.toggleDarkMode = function() { document.body.classList.toggle('dark-mode'); };
            window.logout = function() { localStorage.clear(); location.reload(); };
            window.closeModal = function() { document.getElementById('modal').style.display='none'; };

            // timer & date
            function updateCurrentDate() {
                let t=new Date(); let start=new Date("February 19, 2026 00:00:00").getTime(); let now=t.getTime(); let diff=Math.ceil((start-now)/(86400000));
                let dLabel=document.getElementById('currentDateLabel'), dNum=document.getElementById('currentDayNumber'), dMonth=document.getElementById('currentMonthName');
                if(diff===1){ dLabel.innerText='আগামীকাল'; dNum.innerText='১'; dMonth.innerText='রমজান'; }
                else if(diff<=0){ let rd=Math.abs(diff)+1; dLabel.innerText='আজ'; dNum.innerText=rd.toLocaleString('bn-BD'); dMonth.innerText='রমজান'; }
                else { dLabel.innerText='আজ'; dNum.innerText=(30-diff).toLocaleString('bn-BD'); dMonth.innerText='শাবান'; }
            }
            setInterval(()=>{
                let target=new Date("March 20, 2026 18:15:00").getTime(); let d=target-new Date().getTime();
                if(document.getElementById('days')){
                    document.getElementById('days').innerText=Math.max(0,Math.floor(d/86400000)).toLocaleString('bn-BD');
                    document.getElementById('hours').innerText=Math.max(0,Math.floor((d%86400000)/3600000)).toLocaleString('bn-BD');
                    document.getElementById('mins').innerText=Math.max(0,Math.floor((d%3600000)/60000)).toLocaleString('bn-BD');
                    document.getElementById('secs').innerText=Math.max(0,Math.floor((d%60000)/1000)).toLocaleString('bn-BD');
                }
                updateCurrentDate();
            },1000);

            // CHAT (ROVEX) - English brand name
            window.toggleChat = function() { let c=document.getElementById('chatWindow'); c.style.display = c.style.display==='flex'?'none':'flex'; if(c.style.display==='flex' && !document.querySelector('.suggested-q')) addSuggested(); };
            function addSuggested() {
                let m=document.getElementById('chatMessages'); if(document.querySelector('.suggested-questions')) return;
                let d=document.createElement('div'); d.className='suggested-questions'; d.innerHTML=`<span class="suggested-q" onclick="sendSuggested('রোজার সঠিক নিয়ম')">রোজার নিয়ম</span><span class="suggested-q" onclick="sendSuggested('ইফতারের দোয়া')">ইফতারের দোয়া</span><span class="suggested-q" onclick="sendSuggested('সেহরির সময়')">সেহরির সময়</span><span class="suggested-q" onclick="sendSuggested('তাহাজ্জুদ নামাজ')">তাহাজ্জুদ</span>`;
                m.appendChild(d);
            }
            window.sendSuggested = function(q){ document.getElementById('chatInput').value=q; sendMessage(); };
            window.sendMessage = async function() {
                let inp=document.getElementById('chatInput'); let msg=inp.value.trim(); if(!msg) return;
                let chat=document.getElementById('chatMessages');
                let sug=document.querySelector('.suggested-questions'); if(sug) sug.remove();
                chat.innerHTML+=`<div class="message user-message">${msg}</div>`;
                inp.value=''; chat.scrollTop=chat.scrollHeight;
                let typing=document.createElement('div'); typing.className='message bot-message'; typing.innerText='ROVEX টাইপ করছে...'; typing.id='typing'; chat.appendChild(typing);
                try {
                    let res = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                        method:'POST', headers:{'Authorization':'Bearer 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','Content-Type':'application/json'},
                        body: JSON.stringify({ model:'llama-3.3-70b-versatile', messages:[{role:'system',content:'তুমি ROVEX, একটি ইসলামিক সহায়ক। সবসময় বাংলায় সংক্ষিপ্ত উত্তর দাও। কোনো ইমোজি নয়।'},{role:'user',content:msg}], temperature:0.7 })
                    });
                    document.getElementById('typing')?.remove();
                    let data = await res.json();
                    let reply = data.choices?.[0]?.message?.content || 'আমি বুঝতে পারিনি। আবার বলবেন?';
                    chat.innerHTML+=`<div class="message bot-message">${reply}</div>`;
                } catch { document.getElementById('typing')?.remove(); chat.innerHTML+=`<div class="message bot-message">সাময়িক সমস্যা। পরে চেষ্টা করুন।</div>`; }
                chat.scrollTop=chat.scrollHeight;
            };

            // init
            if(localStorage.getItem('userMobile') && localStorage.getItem('userName')) {
                document.getElementById('login-page').style.display='none';
                document.getElementById('welcome-page').style.display='block';
                document.getElementById('displayUserName').innerText = localStorage.getItem('userName');
                document.getElementById('welcomeMessage').innerHTML = `<p>শুভ দিন, ${localStorage.getItem('userName')}।</p><p>রমজানের প্রস্তুতি নিন DINISLAM নিয়ে।</p>`;
            }
        })();
    </script>
</body>
</html>
