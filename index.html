<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DINISLAM · রমজান ২০২৬</title>
    <!-- Professional fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Hind+Siliguri:wght@300;400;500;600;700&family=Noto+Naskh+Arabic:wght@400;500;600&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Reset and Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Hind Siliguri', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #1E293B;
            line-height: 1.6;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        /* Professional Color System - Modern */
        :root {
            --primary-900: #0A2E2A;
            --primary-800: #14453F;
            --primary-700: #1E5C54;
            --primary-600: #287369;
            --primary-500: #328A7E;
            --primary-400: #5CA196;
            --primary-300: #85B9B0;
            --primary-200: #AFD0C9;
            --primary-100: #D9E8E4;
            
            --accent-500: #C45D40;
            --accent-600: #A84A2F;
            
            --neutral-50: #F8FAFC;
            --neutral-100: #F1F5F9;
            --neutral-200: #E2E8F0;
            --neutral-300: #CBD5E1;
            --neutral-400: #94A3B8;
            --neutral-500: #64748B;
            --neutral-600: #475569;
            --neutral-700: #334155;
            --neutral-800: #1E293B;
            --neutral-900: #0F172A;
            
            --surface-white: #FFFFFF;
            --surface-light: #F8FAFC;
            --border-light: #E2E8F0;
            --shadow-sm: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .dark-mode {
            --primary-900: #E2E8F0;
            --primary-800: #CBD5E1;
            --primary-700: #94A3B8;
            --primary-600: #64748B;
            --primary-500: #475569;
            
            --neutral-50: #0F172A;
            --neutral-100: #1E293B;
            --neutral-200: #334155;
            --neutral-300: #475569;
            --neutral-400: #64748B;
            --neutral-500: #94A3B8;
            --neutral-600: #CBD5E1;
            --neutral-700: #E2E8F0;
            --neutral-800: #F1F5F9;
            --neutral-900: #F8FAFC;
            
            --surface-white: #1E293B;
            --surface-light: #0F172A;
            --border-light: #334155;
            
            background: #0F172A;
            color: #F1F5F9;
        }

        /* Layout */
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 32px;
        }

        /* Login Page - Modern Glassmorphism */
        .login-page {
            min-height: 100vh;
            background: linear-gradient(145deg, #667eea 0%, #764ba2 50%, #6b8cff 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
            position: relative;
            overflow: hidden;
        }

        .login-page::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
            animation: rotate 30s linear infinite;
        }

        .login-page::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" opacity="0.1"><path d="M50 15 L61 35 L85 35 L65 50 L75 75 L50 60 L25 75 L35 50 L15 35 L39 35 Z" fill="white"/></svg>') repeat;
            opacity: 0.1;
            animation: float 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }

        .login-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 40px;
            padding: 60px 48px;
            width: 100%;
            max-width: 480px;
            box-shadow: var(--shadow-xl);
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            z-index: 1;
            transform: translateY(0);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .login-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.3);
        }

        .logo-container {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo-wrapper {
            position: relative;
            display: inline-block;
        }

        .logo-image {
            width: 130px;
            height: 130px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--primary-500);
            box-shadow: var(--shadow-md);
            margin-bottom: 20px;
            transition: all 0.3s;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(50, 138, 126, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(50, 138, 126, 0); }
            100% { box-shadow: 0 0 0 0 rgba(50, 138, 126, 0); }
        }

        .logo-image:hover {
            transform: scale(1.1) rotate(5deg);
        }

        .logo-text {
            font-size: 48px;
            font-weight: 700;
            letter-spacing: -0.02em;
            color: var(--neutral-800);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .logo-text span {
            color: var(--accent-500);
            position: relative;
            display: inline-block;
        }

        .logo-text span::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-500), var(--primary-500));
            transform: scaleX(0);
            transition: transform 0.3s;
            border-radius: 2px;
        }

        .logo-container:hover .logo-text span::after {
            transform: scaleX(1);
        }

        /* Form Elements - Modern */
        .input-group {
            position: relative;
            margin-bottom: 20px;
        }

        .input-field {
            width: 100%;
            padding: 18px 24px;
            border: 2px solid var(--border-light);
            border-radius: 20px;
            font-family: 'Inter', 'Hind Siliguri', sans-serif;
            font-size: 16px;
            background: var(--surface-white);
            color: var(--neutral-800);
            transition: all 0.3s;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 4px rgba(50, 138, 126, 0.15);
            transform: translateY(-2px);
        }

        .input-field:hover {
            border-color: var(--primary-400);
        }

        .input-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--neutral-400);
            transition: color 0.3s;
        }

        .input-field:focus + .input-icon {
            color: var(--primary-500);
        }

        .btn {
            display: inline-block;
            width: 100%;
            padding: 18px 28px;
            border: none;
            border-radius: 20px;
            font-family: 'Inter', 'Hind Siliguri', sans-serif;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-600), var(--primary-700));
            color: white;
            box-shadow: 0 8px 16px -4px rgba(40, 115, 105, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 20px -6px rgba(40, 115, 105, 0.4);
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid var(--primary-600);
            color: var(--primary-600);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, var(--primary-600), var(--primary-700));
            color: white;
            transform: translateY(-2px);
            border-color: transparent;
        }

        /* Welcome Page - Modern */
        .welcome-page {
            min-height: 100vh;
            background: linear-gradient(145deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
            position: relative;
        }

        .welcome-card {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 50px;
            padding: 60px;
            width: 100%;
            max-width: 650px;
            box-shadow: var(--shadow-xl);
            border: 1px solid rgba(255, 255, 255, 0.3);
            animation: slideUpFade 0.8s ease-out;
        }

        @keyframes slideUpFade {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .welcome-name {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 24px;
            text-align: center;
            background: linear-gradient(135deg, var(--primary-600), var(--accent-500));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -100% 0; }
            100% { background-position: 200% 0; }
        }

        .welcome-message {
            background: linear-gradient(135deg, var(--surface-light), white);
            border-left: 4px solid var(--accent-500);
            padding: 35px;
            border-radius: 25px;
            margin: 35px 0;
            color: var(--neutral-700);
            line-height: 1.9;
            font-size: 16px;
            box-shadow: var(--shadow-md);
        }

        /* Header - Modern Glassmorphism */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            padding: 16px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-sm);
        }

        .header-content {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-left {
            padding: 12px 28px;
            background: linear-gradient(135deg, var(--surface-light), white);
            border-radius: 40px;
            font-weight: 500;
            color: var(--neutral-600);
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid var(--border-light);
            box-shadow: var(--shadow-sm);
        }

        .header-left:hover {
            background: linear-gradient(135deg, var(--primary-100), white);
            color: var(--primary-700);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 8px 24px 8px 8px;
            background: linear-gradient(135deg, var(--surface-light), white);
            border-radius: 40px;
            border: 1px solid var(--border-light);
            box-shadow: var(--shadow-sm);
        }

        .header-right img {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 2px solid var(--primary-500);
            transition: all 0.3s;
        }

        .header-right img:hover {
            transform: scale(1.1) rotate(5deg);
            border-color: var(--accent-500);
        }

        /* Hero Section - Modern */
        .hero {
            background: linear-gradient(145deg, #667eea, #764ba2);
            border-radius: 40px;
            padding: 50px;
            margin: 40px 0;
            color: white;
            box-shadow: var(--shadow-xl);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        .hero-grid {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 50px;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        .hero-title {
            font-size: 18px;
            text-transform: uppercase;
            letter-spacing: 3px;
            opacity: 0.9;
            margin-bottom: 12px;
            font-weight: 500;
        }

        .hero-year {
            font-size: 72px;
            font-weight: 700;
            line-height: 1.1;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.2);
        }

        .hero-date-card {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            padding: 40px 60px;
            border-radius: 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: var(--shadow-lg);
        }

        .hero-day-number {
            font-size: 96px;
            font-weight: 700;
            line-height: 1;
            color: white;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.2);
        }

        .hero-day-label {
            font-size: 18px;
            opacity: 0.95;
            margin-top: 8px;
            font-weight: 500;
        }

        /* Timer - Modern */
        .timer-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
            margin-top: 40px;
        }

        .timer-item {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(8px);
            padding: 25px;
            border-radius: 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
        }

        .timer-item:hover {
            transform: translateY(-5px) scale(1.02);
            background: rgba(0, 0, 0, 0.4);
            box-shadow: var(--shadow-lg);
        }

        .timer-number {
            font-size: 48px;
            font-weight: 700;
            line-height: 1;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .timer-label {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 8px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-weight: 500;
        }

        /* Dashboard Grid - Modern */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 24px;
            margin: 50px 0;
        }

        .dashboard-card {
            background: white;
            border: none;
            border-radius: 30px;
            padding: 35px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-500), var(--accent-500));
            transform: scaleX(0);
            transition: transform 0.4s;
        }

        .dashboard-card:hover::before {
            transform: scaleX(1);
        }

        .dashboard-card::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, var(--primary-100) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.4s;
        }

        .dashboard-card:hover::after {
            opacity: 1;
        }

        .dashboard-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-xl);
        }

        .card-icon {
            font-size: 40px;
            color: var(--primary-600);
            margin-bottom: 20px;
            transition: all 0.4s;
            position: relative;
            z-index: 1;
        }

        .dashboard-card:hover .card-icon {
            transform: scale(1.2) rotate(5deg);
            color: var(--accent-500);
        }

        .card-title {
            font-weight: 600;
            color: var(--neutral-800);
            font-size: 18px;
            position: relative;
            z-index: 1;
        }

        /* Friends Section - Modern */
        .friends-container {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 24px;
            height: 650px;
            background: white;
            border-radius: 40px;
            overflow: hidden;
            border: 1px solid var(--border-light);
            box-shadow: var(--shadow-xl);
        }

        .friends-sidebar {
            background: linear-gradient(135deg, var(--surface-light), white);
            border-right: 1px solid var(--border-light);
            padding: 30px;
            overflow-y: auto;
        }

        .friends-search {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--border-light);
            border-radius: 50px;
            margin-bottom: 30px;
            font-family: 'Inter', 'Hind Siliguri', sans-serif;
            transition: all 0.3s;
        }

        .friends-search:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 4px rgba(50, 138, 126, 0.1);
        }

        .friends-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .friend-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 18px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 10px;
            border: 1px solid transparent;
        }

        .friend-item:hover {
            background: linear-gradient(135deg, var(--primary-100), var(--primary-50));
            transform: translateX(5px);
            border-color: var(--primary-300);
            box-shadow: var(--shadow-md);
        }

        .friend-item.active {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            color: white;
            box-shadow: var(--shadow-lg);
        }

        .friend-item.active .friend-info h4,
        .friend-item.active .friend-info p {
            color: white;
        }

        .friend-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-400), var(--primary-600));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 24px;
            box-shadow: var(--shadow-md);
            transition: transform 0.3s;
        }

        .friend-item:hover .friend-avatar {
            transform: scale(1.1);
        }

        .friend-info h4 {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 18px;
        }

        .friend-info p {
            font-size: 13px;
            opacity: 0.8;
        }

        .chat-area {
            display: flex;
            flex-direction: column;
            height: 100%;
            background: var(--surface-light);
        }

        .chat-header {
            padding: 25px 30px;
            border-bottom: 1px solid var(--border-light);
            background: white;
            box-shadow: var(--shadow-sm);
        }

        .chat-header h3 {
            font-size: 22px;
            color: var(--primary-600);
        }

        .chat-messages-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
            background: linear-gradient(135deg, #f5f7fa 0%, #e9ecf2 100%);
        }

        .message-friend {
            max-width: 70%;
            padding: 15px 22px;
            border-radius: 25px;
            position: relative;
            word-wrap: break-word;
            animation: messagePop 0.3s ease;
            box-shadow: var(--shadow-md);
            font-size: 15px;
            line-height: 1.5;
        }

        @keyframes messagePop {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .message-friend.sent {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
            margin-left: auto;
        }

        .message-friend.received {
            background: white;
            color: var(--neutral-700);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
            border: 1px solid var(--border-light);
        }

        .message-time {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 8px;
            text-align: right;
            font-weight: 400;
        }

        .chat-input-area-friend {
            padding: 25px 30px;
            border-top: 1px solid var(--border-light);
            display: flex;
            gap: 15px;
            background: white;
        }

        .add-friend-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--primary-100), var(--primary-50));
            border: 2px dashed var(--primary-400);
            border-radius: 50px;
            color: var(--primary-600);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 25px;
            font-size: 16px;
        }

        .add-friend-btn:hover {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            color: white;
            border-color: transparent;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* Modal - Modern */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(12px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 24px;
            animation: fadeIn 0.4s;
        }

        @keyframes fadeIn {
            from { opacity: 0; backdrop-filter: blur(0); }
            to { opacity: 1; backdrop-filter: blur(12px); }
        }

        .modal-content {
            background: white;
            border-radius: 50px;
            width: 100%;
            max-width: 1000px;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            padding: 50px;
            box-shadow: var(--shadow-xl);
            animation: modalSlideUp 0.5s;
        }

        @keyframes modalSlideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            top: 30px;
            right: 30px;
            font-size: 30px;
            color: var(--neutral-400);
            cursor: pointer;
            transition: all 0.3s;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: var(--surface-light);
            z-index: 10;
        }

        .modal-close:hover {
            color: white;
            background: var(--accent-500);
            transform: rotate(90deg) scale(1.1);
        }

        /* Dua Cards - Modern */
        .dua-card {
            background: linear-gradient(135deg, white, var(--surface-light));
            border-radius: 30px;
            padding: 30px;
            margin-bottom: 20px;
            border-left: 5px solid var(--primary-500);
            box-shadow: var(--shadow-md);
            transition: all 0.3s;
        }

        .dua-card:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-lg);
        }

        .dua-title {
            font-weight: 600;
            color: var(--primary-600);
            margin-bottom: 15px;
            font-size: 20px;
        }

        .dua-arabic {
            font-family: 'Noto Naskh Arabic', serif;
            font-size: 24px;
            text-align: right;
            direction: rtl;
            color: var(--neutral-800);
            margin: 20px 0;
            line-height: 2;
            background: rgba(50, 138, 126, 0.05);
            padding: 20px;
            border-radius: 20px;
        }

        .dua-bangla {
            color: var(--neutral-600);
            font-size: 17px;
            line-height: 1.8;
        }

        /* Tasbih - Modern */
        .tasbih-container {
            background: linear-gradient(135deg, var(--surface-light), white);
            border-radius: 50px;
            padding: 50px;
            text-align: center;
        }

        .tasbih-tabs {
            display: flex;
            gap: 12px;
            background: var(--neutral-200);
            padding: 6px;
            border-radius: 60px;
            margin-bottom: 40px;
        }

        .tasbih-tab {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 60px;
            font-weight: 600;
            background: transparent;
            color: var(--neutral-600);
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
        }

        .tasbih-tab.active {
            background: white;
            color: var(--primary-600);
            box-shadow: var(--shadow-md);
        }

        .tasbih-counter {
            width: 300px;
            height: 300px;
            margin: 0 auto 30px;
            position: relative;
            cursor: pointer;
        }

        .tasbih-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: white;
            border: 8px solid var(--primary-500);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-xl);
            transition: all 0.3s;
        }

        .tasbih-counter:hover .tasbih-circle {
            transform: scale(1.05);
            border-color: var(--accent-500);
        }

        .tasbih-count {
            font-size: 72px;
            font-weight: 700;
            color: var(--neutral-800);
            line-height: 1;
        }

        .tasbih-label {
            font-size: 20px;
            color: var(--primary-600);
            margin-top: 12px;
            font-weight: 500;
        }

        .progress-ring {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .progress-ring circle {
            fill: transparent;
            stroke: var(--primary-500);
            stroke-width: 8;
            stroke-dasharray: 942;
            stroke-dashoffset: 942;
            transition: stroke-dashoffset 0.3s;
            filter: drop-shadow(0 4px 6px rgba(50, 138, 126, 0.3));
        }

        /* ROVEX Chat - Modern */
        .chat-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 80px;
            height: 80px;
            border-radius: 40px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-xl);
            z-index: 90;
            border: 3px solid white;
            transition: all 0.4s;
            animation: chatPulse 2s infinite;
        }

        @keyframes chatPulse {
            0% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.7); }
            70% { box-shadow: 0 0 0 20px rgba(102, 126, 234, 0); }
            100% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0); }
        }

        .chat-button:hover {
            transform: scale(1.15) rotate(5deg);
            background: linear-gradient(135deg, #764ba2, #667eea);
        }

        .chat-button i {
            font-size: 32px;
        }

        .chat-button span {
            font-size: 12px;
            font-weight: 600;
            margin-top: 4px;
        }

        .chat-window {
            position: fixed;
            bottom: 120px;
            right: 30px;
            width: 400px;
            height: 600px;
            background: white;
            border-radius: 40px;
            display: none;
            flex-direction: column;
            overflow: hidden;
            z-index: 91;
            box-shadow: var(--shadow-xl);
            border: 1px solid rgba(255, 255, 255, 0.3);
            animation: slideInRight 0.4s;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .chat-header-rovex {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .chat-header-rovex h4 {
            font-weight: 600;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-header-rovex h4 i {
            font-size: 24px;
        }

        .chat-messages {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            background: linear-gradient(135deg, #f5f7fa 0%, #e9ecf2 100%);
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            padding: 18px 22px;
            border-radius: 25px;
            max-width: 85%;
            font-size: 15px;
            line-height: 1.6;
            animation: messageSlide 0.3s;
            box-shadow: var(--shadow-md);
        }

        .user-message {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .bot-message {
            background: white;
            color: var(--neutral-700);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        .suggested-q {
            padding: 12px 22px;
            background: white;
            border: 1px solid var(--border-light);
            border-radius: 40px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--neutral-600);
            box-shadow: var(--shadow-sm);
        }

        .suggested-q:hover {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: transparent;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* Side Menu */
        .side-menu-button {
            position: fixed;
            bottom: 120px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 20px;
            background: white;
            border: 1px solid var(--border-light);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 6px;
            cursor: pointer;
            z-index: 90;
            transition: all 0.3s;
            box-shadow: var(--shadow-lg);
        }

        .side-menu-button:hover {
            background: linear-gradient(135deg, #667eea, #764ba2);
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
        }

        .side-menu-button:hover span {
            background: white;
        }

        .side-menu-button span {
            width: 25px;
            height: 3px;
            background: var(--neutral-600);
            border-radius: 3px;
            transition: all 0.3s;
        }

        .side-options {
            position: fixed;
            bottom: 200px;
            right: 30px;
            background: white;
            border: none;
            border-radius: 30px;
            padding: 20px;
            display: none;
            flex-direction: column;
            gap: 10px;
            z-index: 91;
            box-shadow: var(--shadow-xl);
            min-width: 200px;
        }

        .side-option {
            padding: 16px 25px;
            border: none;
            border-radius: 20px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            background: var(--surface-light);
            color: var(--neutral-700);
            font-family: 'Inter', 'Hind Siliguri', sans-serif;
            font-size: 15px;
            text-align: left;
        }

        .side-option:hover {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: translateX(5px);
        }

        .side-option.logout:hover {
            background: linear-gradient(135deg, #f56565, #c53030);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .friends-container {
                grid-template-columns: 300px 1fr;
            }
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .hero-grid {
                grid-template-columns: 1fr;
            }
            
            .timer-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .chat-window {
                width: 340px;
                height: 500px;
                right: 15px;
            }

            .friends-container {
                grid-template-columns: 1fr;
            }

            .hero-year {
                font-size: 48px;
            }

            .hero-day-number {
                font-size: 64px;
            }
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="login-page" class="login-page">
        <div class="login-card">
            <div class="logo-container">
                <div class="logo-wrapper">
                    <img src="https://i.postimg.cc/yNhjsYJ4/1771310158774_01.jpg" alt="DINISLAM" class="logo-image">
                </div>
                <div class="logo-text"><span>DINI</span>SLAM</div>
            </div>
            <p style="text-align: center; color: var(--neutral-500); margin-bottom: 30px; font-size: 18px;">রমজান ২০২৬ · স্বাগতম</p>
            
            <div class="input-group">
                <input type="text" id="userName" class="input-field" placeholder="আপনার নাম">
                <i class="fas fa-user input-icon"></i>
            </div>
            
            <div class="input-group">
                <input type="number" id="mobile" class="input-field" placeholder="মোবাইল নম্বর">
                <i class="fas fa-phone input-icon"></i>
            </div>
            
            <button class="btn btn-primary" onclick="login()">
                <i class="fas fa-sign-in-alt" style="margin-right: 10px;"></i>প্রবেশ করুন
            </button>
        </div>
    </div>

    <!-- Welcome Page -->
    <div id="welcome-page" style="display: none;" class="welcome-page">
        <div class="welcome-card">
            <div class="logo-container">
                <img src="https://i.postimg.cc/yNhjsYJ4/1771310158774_01.jpg" alt="DINISLAM" class="logo-image">
            </div>
            <div class="welcome-name" id="displayUserName"></div>
            <div class="welcome-message" id="welcomeMessage"></div>
            <div style="display: flex; flex-direction: column; gap: 18px;">
                <button class="btn btn-primary" onclick="enterMainPage()">
                    <i class="fas fa-home" style="margin-right: 10px;"></i>প্রধান পৃষ্ঠা
                </button>
                <button class="btn btn-secondary" onclick="downloadWelcomePDF()">
                    <i class="fas fa-download" style="margin-right: 10px;"></i>ডাউনলোড পিডিএফ
                </button>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-left" onclick="openModal('creator')">
                    <i class="fas fa-user-circle" style="margin-right: 10px;"></i> Creator Info
                </div>
                <div class="header-right">
                    <span style="font-weight: 600;">DINISLAM</span>
                    <img src="https://i.postimg.cc/yNhjsYJ4/1771310158774_01.jpg" alt="Profile">
                </div>
            </div>
        </header>

        <div class="container">
            <!-- Hero Section -->
            <div class="hero">
                <div class="hero-grid">
                    <div>
                        <div class="hero-title"><i class="fas fa-moon" style="margin-right: 10px;"></i>পবিত্র মাহে রমজান</div>
                        <div class="hero-year">২০২৬</div>
                    </div>
                    <div class="hero-date-card">
                        <div id="currentDateLabel" style="font-size: 18px; opacity: 0.9;">আজ</div>
                        <div class="hero-day-number" id="currentDayNumber">২৯</div>
                        <div class="hero-day-label" id="currentMonthName">শাবান</div>
                    </div>
                </div>
                
                <!-- Timer -->
                <div class="timer-grid">
                    <div class="timer-item">
                        <div class="timer-number" id="days">০০</div>
                        <div class="timer-label">দিন</div>
                    </div>
                    <div class="timer-item">
                        <div class="timer-number" id="hours">০০</div>
                        <div class="timer-label">ঘণ্টা</div>
                    </div>
                    <div class="timer-item">
                        <div class="timer-number" id="mins">০০</div>
                        <div class="timer-label">মিনিট</div>
                    </div>
                    <div class="timer-item">
                        <div class="timer-number" id="secs">০০</div>
                        <div class="timer-label">সেকেন্ড</div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 25px; font-size: 18px; opacity: 0.95; font-weight: 500;">
                    <i class="fas fa-star" style="margin-right: 8px;"></i> ঈদুল ফিতর আসতে সময় বাকি
                </div>
            </div>

            <!-- Dashboard Grid -->
            <div class="dashboard-grid">
                <div class="dashboard-card" onclick="openModal('cal')">
                    <div class="card-icon"><i class="fas fa-calendar-alt"></i></div>
                    <div class="card-title">সময়সূচী</div>
                </div>
                <div class="dashboard-card" onclick="openModal('dua')">
                    <div class="card-icon"><i class="fas fa-hand-paper"></i></div>
                    <div class="card-title">দোয়া</div>
                </div>
                <div class="dashboard-card" onclick="openModal('tas')">
                    <div class="card-icon"><i class="fas fa-circle"></i></div>
                    <div class="card-title">তসবিহ</div>
                </div>
                <div class="dashboard-card" onclick="openModal('zak')">
                    <div class="card-icon"><i class="fas fa-calculator"></i></div>
                    <div class="card-title">জাকাত</div>
                </div>
                <div class="dashboard-card" onclick="openModal('vid')">
                    <div class="card-icon"><i class="fas fa-play-circle"></i></div>
                    <div class="card-title">ভিডিও</div>
                </div>
                <div class="dashboard-card" onclick="openModal('friends')">
                    <div class="card-icon"><i class="fas fa-users"></i></div>
                    <div class="card-title">Friends</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ROVEX Chat - Only visible on main page -->
    <div class="chat-button" onclick="toggleChat()" id="chatButton">
        <i class="fas fa-comment"></i>
        <span>ROVEX</span>
    </div>
    
    <div class="chat-window" id="chatWindow">
        <div class="chat-header-rovex">
            <h4><i class="fas fa-robot"></i> ROVEX · সহায়ক</h4>
            <button class="chat-close" onclick="toggleChat()">×</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
                <i class="fas fa-mosque" style="margin-right: 10px; color: var(--primary-500);"></i>
                আসসালামু আলাইকুম। আমি ROVEX, আপনার ইসলামিক AI সহকারী। কুরআন, হাদিস ও দ্বীনি বিষয়ে যেকোনো প্রশ্নে সাহায্য করতে প্রস্তুত আছি।
            </div>
        </div>
        <div class="chat-input-area">
            <input type="text" id="chatInput" class="chat-input" placeholder="লিখুন...">
            <button class="chat-send" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <!-- Side Menu -->
    <div class="side-menu-button" onclick="toggleSideOptions()">
        <span></span>
        <span></span>
        <span></span>
    </div>
    
    <div class="side-options" id="sideOptions">
        <button class="side-option" onclick="toggleDarkMode()"><i class="fas fa-moon" style="margin-right: 10px;"></i>ডার্ক মোড</button>
        <button class="side-option" onclick="openModal('settings')"><i class="fas fa-cog" style="margin-right: 10px;"></i>সেটিংস</button>
        <button class="side-option logout" onclick="logout()"><i class="fas fa-sign-out-alt" style="margin-right: 10px;"></i>লগআউট</button>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal()">×</span>
            <div id="modal-body"></div>
        </div>
    </div>

    <script>
        (function() {
            // Data
            function generateData(sH, sM, iH, iM) {
                let res = [];
                let dates = ["১৯ ফেব", "২০ ফেব", "২১ ফেব", "২২ ফেব", "২৩ ফেব", "২৪ ফেব", "২৫ ফেব", "২৬ ফেব", "২৭ ফেব", "২৮ ফেব", "০১ মার্চ", "০২ মার্চ", "০৩ মার্চ", "০৪ মার্চ", "০৫ মার্চ", "০৬ মার্চ", "০৭ মার্চ", "০৮ মার্চ", "০৯ মার্চ", "১০ মার্চ", "১১ মার্চ", "১২ মার্চ", "১৩ মার্চ", "১৪ মার্চ", "১৫ মার্চ", "১৬ মার্চ", "১৭ মার্চ", "১৮ মার্চ", "১৯ মার্চ", "২০ মার্চ"];
                for(let i=0;i<30;i++) {
                    let sTotal = sM - i; let sHr = sH; if(sTotal < 0) { sHr--; sTotal += 60; }
                    let iTotal = iM + i; let iHr = iH; if(iTotal >= 60) { iHr++; iTotal -= 60; }
                    res.push({ r: (i+1).toLocaleString('bn-BD'), d: dates[i], s: sHr.toLocaleString('bn-BD')+":"+sTotal.toString().padStart(2,'0').toLocaleString('bn-BD'), i: iHr.toLocaleString('bn-BD')+":"+iTotal.toString().padStart(2,'0').toLocaleString('bn-BD') });
                }
                return res;
            }
            
            const ramadanData = {
                'ঢাকা': generateData(5,19,18,5),
                'রাজশাহী': generateData(5,18,18,4),
                'চট্টগ্রাম': generateData(5,5,17,53),
                'সিলেট': generateData(5,4,17,50),
                'খুলনা': generateData(5,15,18,2),
                'বরিশাল': generateData(5,11,17,59),
                'রংপুর': generateData(5,17,18,0),
                'ময়মনসিংহ': generateData(5,14,18,2)
            };
            
            const allDuas = [
                {t:"১. চাঁদ দেখার দোয়া", a:"اللَّهُمَّ أَهِلَّهُ عَلَيْنَا بِالْأَمْنِ وَالْإِيمَانِ وَالسَّلَامَةِ وَالْإِسْلَامِ", b:"হে আল্লাহ! চাঁদকে আমাদের নিরাপত্তা, ঈমান, শান্তি ও ইসলামের সাথে উদিত করুন।"},
                {t:"২. রোজার নিয়ত", a:"نَوَيْتُ أَنْ أَصُومَ غَدًا لِلّٰهِ تَعَالَى مِنْ شَهْرِ رَمَضَانَ", b:"আগামীকাল রমজানের রোজা রাখার নিয়ত করলাম।"},
                {t:"৩. ইফতারের দোয়া", a:"اللَّهُمَّ لَكَ صُمْتُ وَعَلَى رِزْقِكَ أَفْطَرْتُ", b:"হে আল্লাহ! আপনার জন্য রোজা রেখেছি এবং আপনার রিজিকেই ইফতার করছি।"},
                {t:"৪. ইফতারের পর দোয়া", a:"ذَهَبَ الظَّمَأُ وَابْتَلَّتِ الْعُرُوقُ وَثَبَتَ الْأَجْرُ إِنْ شَاءَ اللَّهُ", b:"পিপাসা মিটেছে, শিরাসমূহ সিক্ত হয়েছে এবং আল্লাহ চাইলে পুরস্কার নির্ধারিত হয়েছে।"},
                {t:"৫. লাইলাতুল কদরের দোয়া", a:"اللَّهُمَّ إِنَّكَ عَفُوٌّ تُحِبُّ الْعَفْوَ فَاعْفُ عَنِّي", b:"হে আল্লাহ! আপনি ক্ষমাশীল, আপনি ক্ষমা করতে পছন্দ করেন, তাই আমাকে ক্ষমা করুন।"},
                {t:"৬. পিতামাতার দোয়া", a:"رَّبِّ ارْحَمْهُمَا كَمَا رَبَّيَانِي صَغِيرًا", b:"হে আল্লাহ! আমার পিতামাতার প্রতি দয়া করুন।"},
                {t:"৭. বিপদের দোয়া", a:"حَسْبُنَا اللَّهُ وَنِعْمَ الْوَكِيلُ", b:"আল্লাহই আমাদের জন্য যথেষ্ট।"},
                {t:"৮. ক্ষমা চাওয়ার দোয়া", a:"أَسْتَغْفِرُ اللَّهَ رَبِّي مِنْ كُلِّ ذَنْبٍ وَأَتُوبُ إِلَيْهِ", b:"আমি আমার রবের কাছে সব গুনাহের ক্ষমা চাই।"},
                {t:"৯. রিযিকের দোয়া", a:"اللَّهُمَّ ارْزُقْنِي رِزْقًا حَلَالًا طَيِّبًا", b:"হে আল্লাহ! আমাকে হালাল রিযিক দিন।"},
                {t:"১০. জাহান্নাম থেকে মুক্তি", a:"اللَّهُمَّ أَجِرْنِي مِنَ النَّارِ", b:"হে আল্লাহ! আমাকে জাহান্নাম থেকে রক্ষা করুন।"},
                {t:"১১. ওযুর আগের দোয়া", a:"بِسْمِ اللَّهِ", b:"আল্লাহর নামে শুরু করছি।"},
                {t:"১২. ওযুর পরের দোয়া", a:"أَشْهَدُ أَنْ لَا إِلَهَ إِلَّا اللَّهُ وَأَشْهَدُ أَنَّ مُحَمَّدًا عَبْدُهُ وَرَسُولُهُ", b:"সাক্ষ্য দিচ্ছি আল্লাহ ছাড়া কোনো মাবুদ নেই।"},
                {t:"১৩. মসজিদে প্রবেশের দোয়া", a:"اللَّهُمَّ افْتَحْ لِي أَبْوَابَ رَحْمَتِكَ", b:"হে আল্লাহ! রহমতের দরজা খুলে দিন।"},
                {t:"১৪. মসজিদ থেকে বের হওয়ার দোয়া", a:"اللَّهُمَّ إِنِّي أَسْأَلُكَ مِنْ فَضْلِكَ", b:"হে আল্লাহ! আপনার অনুগ্রহ প্রার্থনা করছি।"},
                {t:"১৫. আয়না দেখার দোয়া", a:"اللَّهُمَّ حَسَّنتَ خَلْقِي فَحَسِّنْ خُلُقِي", b:"হে আল্লাহ! চরিত্র সুন্দর করুন।"},
                {t:"১৬. সফরের দোয়া", a:"سُبْحَانَ الَّذِي سَخَّرَ لَنَا هَذَا", b:"পবিত্র তিনি যিনি এগুলো আমাদের বশীভূত করেছেন।"},
                {t:"১৭. খাওয়ার আগের দোয়া", a:"بِسْمِ اللَّهِ وَعَلَى بَرَكَةِ اللَّهِ", b:"আল্লাহর নামে ও বরকতে।"},
                {t:"১৮. খাওয়ার পরের দোয়া", a:"الْحَمْدُ لِلَّهِ الَّذِي أَطْعَمَنَا", b:"প্রশংসা আল্লাহর যিনি খাইয়েছেন।"},
                {t:"১৯. ঘুমানোর দোয়া", a:"بِاسْمِكَ اللَّهُمَّ أَمُوتُ وَأَحْيَا", b:"আপনার নামে মরি ও জীবিত হই।"},
                {t:"২০. ঘুম থেকে ওঠার দোয়া", a:"الْحَمْدُ لِلَّهِ الَّذِي أَحْيَانَا", b:"প্রশংসা আল্লাহর যিনি জীবিত করলেন।"},
                {t:"২১. বাথরুম প্রবেশের দোয়া", a:"اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْخُبُثِ", b:"অপবিত্র জিন থেকে আশ্রয় চাই।"},
                {t:"২২. বাথরুম থেকে বের হওয়ার দোয়া", a:"غُفْرَانَكَ", b:"ক্ষমা প্রার্থনা করছি।"},
                {t:"২৩. নতুন কাপড় পরার দোয়া", a:"الْحَمْدُ لِلَّهِ الَّذِي كَسَانِي", b:"প্রশংসা যিনি আমাকে কাপড় পরিয়েছেন।"},
                {t:"২৪. রাগ দমনের দোয়া", a:"أَعُوذُ بِاللَّهِ مِنَ الشَّيْطَانِ", b:"শয়তান থেকে আল্লাহর আশ্রয়।"},
                {t:"২৫. বৃষ্টির দোয়া", a:"اللَّهُمَّ صَيِّبًا نَافِعًا", b:"হে আল্লাহ! উপকারী বৃষ্টি দিন।"},
                {t:"২৬. বজ্রপাতের সময় দোয়া", a:"سُبْحَانَ الَّذِي يُسَبِّحُ الرَّعْدُ", b:"পবিত্র তিনি যাঁর প্রশংসা বজ্র করে।"},
                {t:"২৭. সিজদার দোয়া", a:"سُبْحَانَ رَبِّيَ الْأَعْلَى", b:"মহান রবের পবিত্রতা।"},
                {t:"২৮. রুকুর দোয়া", a:"سُبْحَانَ رَبِّيَ الْعَظِيمِ", b:"সুমহান রবের পবিত্রতা।"},
                {t:"২৯. নামাজের শেষে দোয়া", a:"رَبَّنَا آتِنَا فِي الدُّنْيَا حَسَنَةً", b:"হে আমাদের রব! দুনিয়া ও আখেরাতে কল্যাণ দিন।"},
                {t:"৩০. সালাম ফেরানোর দোয়া", a:"السَّلَامُ عَلَيْكُمْ وَرَحْمَةُ اللَّهِ", b:"আপনাদের প্রতি শান্তি ও আল্লাহর রহমত বর্ষিত হোক।"}
            ];

            // Friends System - Fixed
            let friends = JSON.parse(localStorage.getItem('friends')) || [];
            let currentFriend = null;
            let messages = JSON.parse(localStorage.getItem('friendMessages')) || {};

            // Tasbih
            let tasCount = parseInt(localStorage.getItem('tasCount')) || 0;
            let generalTasCount = parseInt(localStorage.getItem('generalTasCount')) || 0;
            let currentTasMode = 'regular';

            function getRegularLabel(c) { 
                let m = c % 100; 
                if(m <= 33) return 'সুবহানাল্লাহ'; 
                if(m <= 66) return 'আলহামদুলিল্লাহ'; 
                return 'আল্লাহু আকবার'; 
            }

            // Functions
            window.login = function() {
                let name = document.getElementById('userName').value.trim();
                let mobile = document.getElementById('mobile').value.trim();
                if(name && mobile.length >= 11) {
                    localStorage.setItem('userName', name);
                    localStorage.setItem('userMobile', mobile);
                    document.getElementById('login-page').style.display = 'none';
                    document.getElementById('welcome-page').style.display = 'flex';
                    document.getElementById('displayUserName').innerText = name;
                    
                    let hour = new Date().getHours();
                    let greeting = hour < 12 ? 'শুভ সকাল' : hour < 17 ? 'শুভ বিকাল' : 'শুভ সন্ধ্যা';
                    
                    document.getElementById('welcomeMessage').innerHTML = `
                        <p><i class="fas fa-smile" style="color: var(--primary-500); margin-right: 8px;"></i> ${greeting} ${name},</p>
                        <p>DINISLAM প্ল্যাটফর্মে আপনাকে স্বাগতম। রমজানের সময়সূচি, দোয়া ও তসবিহ এক ক্লিকেই পাবেন।</p>
                        <p style="color: var(--primary-600); font-weight: 600;">আল্লাহ আপনার সব নেক কাজ কবুল করুন।</p>
                    `;
                } else {
                    alert('নাম ও সঠিক মোবাইল নম্বর দিন (১১ ডিজিট)');
                }
            };

            window.enterMainPage = function() { 
                document.getElementById('welcome-page').style.display = 'none'; 
                document.getElementById('dashboard').style.display = 'block';
                document.getElementById('chatButton').style.display = 'flex';
            };

            window.downloadWelcomePDF = function() {
                let name = localStorage.getItem('userName') || 'ভাই';
                let pdfContent = `
                    <div class="pdf-style" style="font-family: 'Hind Siliguri', sans-serif; padding: 50px; max-width: 800px; margin: 0 auto; background: white; border-radius: 30px;">
                        <div style="text-align: center; margin-bottom: 40px; border-bottom: 3px solid #328A7E; padding-bottom: 30px;">
                            <img src="https://i.postimg.cc/yNhjsYJ4/1771310158774_01.jpg" style="width: 120px; height: 120px; border-radius: 50%; margin-bottom: 20px; border: 4px solid #328A7E;">
                            <h1 style="font-size: 42px; color: #287369; font-weight: 700;">DINISLAM</h1>
                            <p style="font-size: 22px; color: #C45D40; margin-top: 10px;">রমজান ২০২৬</p>
                        </div>
                        <div style="line-height: 1.9; font-size: 18px;">
                            <h2 style="color: #287369; margin-bottom: 25px;">প্রিয় ${name},</h2>
                            <p style="margin-bottom: 25px;">আপনাকে DINISLAM প্ল্যাটফর্মে স্বাগতম। এই অ্যাপের মাধ্যমে আপনি পাবেন:</p>
                            <ul style="list-style-type: none; padding: 25px 0;">
                                <li style="padding: 15px; margin: 10px 0; background: #f5f5f5; border-radius: 15px; border-left: 4px solid #328A7E;">✅ সঠিক সেহরি ও ইফতারের সময়সূচি</li>
                                <li style="padding: 15px; margin: 10px 0; background: #f5f5f5; border-radius: 15px; border-left: 4px solid #C45D40;">✅ গুরুত্বপূর্ণ দোয়া সমূহ</li>
                                <li style="padding: 15px; margin: 10px 0; background: #f5f5f5; border-radius: 15px; border-left: 4px solid #328A7E;">✅ ডিজিটাল তসবিহ</li>
                                <li style="padding: 15px; margin: 10px 0; background: #f5f5f5; border-radius: 15px; border-left: 4px solid #C45D40;">✅ জাকাত ক্যালকুলেটর</li>
                                <li style="padding: 15px; margin: 10px 0; background: #f5f5f5; border-radius: 15px; border-left: 4px solid #328A7E;">✅ ইসলামিক ভিডিও</li>
                                <li style="padding: 15px; margin: 10px 0; background: #f5f5f5; border-radius: 15px; border-left: 4px solid #C45D40;">✅ বন্ধুদের সাথে মেসেজিং</li>
                            </ul>
                            <p style="font-size: 20px; color: #287369; font-weight: 600; text-align: center; margin: 30px 0;">আল্লাহ আপনার সকল ইবাদত কবুল করুন এবং এই রমজানকে আপনার জন্য বরকতময় করুন।</p>
                        </div>
                        <div style="margin-top: 50px; text-align: center; color: #64748B; border-top: 2px solid #E2E8F0; padding-top: 25px;">
                            <p>© ২০২৬ DINISLAM - সব অধিকার সংরক্ষিত</p>
                            <p style="font-size: 16px;">শামিউল ইসলাম বর্ষন কর্তৃক নির্মিত</p>
                        </div>
                    </div>
                `;
                
                let blob = new Blob([pdfContent], {type: 'text/html'});
                let a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = 'DINISLAM_Welcome.html';
                a.click();
                
                alert('PDF ডাউনলোড সম্পন্ন হয়েছে! (HTML ফরম্যাটে)');
            };

            window.openModal = function(type) {
                let body = document.getElementById('modal-body');
                document.getElementById('modal').style.display = 'flex';
                
                if(type == 'cal') {
                    let html = '<h3 style="margin-bottom: 30px; font-size: 28px;">বিভাগ নির্বাচন করুন</h3>';
                    Object.keys(ramadanData).forEach(d => {
                        html += `<button class="btn btn-primary" style="margin-bottom: 15px; width: 100%;" onclick="showTable('${d}')"><i class="fas fa-map-marker-alt" style="margin-right: 10px;"></i>${d}</button>`;
                    });
                    body.innerHTML = html;
                } 
                else if(type == 'dua') {
                    let html = '<h3 style="margin-bottom: 30px; font-size: 28px;"><i class="fas fa-hand-paper" style="margin-right: 15px;"></i>প্রয়োজনীয় দোয়া</h3>';
                    allDuas.forEach(d => {
                        html += `
                            <div class="dua-card">
                                <div class="dua-title">${d.t}</div>
                                <div class="dua-arabic">${d.a}</div>
                                <div class="dua-bangla">${d.b}</div>
                            </div>
                        `;
                    });
                    body.innerHTML = html;
                }
                else if(type == 'tas') {
                    renderTasUI();
                }
                else if(type == 'zak') {
                    body.innerHTML = `
                        <h3 style="margin-bottom: 30px; font-size: 28px;"><i class="fas fa-calculator" style="margin-right: 15px;"></i>জাকাত ক্যালকুলেটর</h3>
                        <p style="color: var(--neutral-500); margin-bottom: 25px; font-size: 18px;">মোট সম্পদের ২.৫% জাকাত দিতে হবে</p>
                        <input type="number" id="cash" class="input-field" placeholder="মোট সম্পদ (টাকা)" oninput="liveZak()">
                        <div style="background: linear-gradient(135deg, var(--primary-100), var(--primary-50)); padding: 35px; border-radius: 25px; margin-top: 30px;">
                            <div style="color: var(--neutral-600); font-size: 18px; margin-bottom: 10px;">জাকাতের পরিমাণ</div>
                            <div style="font-size: 48px; font-weight: 700; color: var(--primary-600);" id="zRes">০ টাকা</div>
                        </div>
                    `;
                }
                else if(type == 'creator') {
                    showPremiumCreator();
                }
                else if(type == 'vid') {
                    showVideoSearch();
                }
                else if(type == 'friends') {
                    showFriendsUI();
                }
                else if(type == 'settings') {
                    body.innerHTML = `
                        <h3 style="margin-bottom: 30px; font-size: 28px;"><i class="fas fa-cog" style="margin-right: 15px;"></i>সেটিংস</h3>
                        <div style="background: var(--surface-light); padding: 30px; border-radius: 25px;">
                            <p style="margin-bottom: 20px;"><i class="fas fa-user" style="margin-right: 10px; color: var(--primary-500);"></i> নাম: ${localStorage.getItem('userName')}</p>
                            <p style="margin-bottom: 20px;"><i class="fas fa-phone" style="margin-right: 10px; color: var(--primary-500);"></i> মোবাইল: ${localStorage.getItem('userMobile')}</p>
                            <p style="margin-bottom: 20px;"><i class="fas fa-moon" style="margin-right: 10px; color: var(--primary-500);"></i> ডার্ক মোড: টগল বাটন ব্যবহার করুন</p>
                            <button class="btn btn-secondary" onclick="clearAllData()" style="margin-top: 20px;"><i class="fas fa-trash" style="margin-right: 10px;"></i>সব ডাটা মুছুন</button>
                        </div>
                    `;
                }
            };

            window.clearAllData = function() {
                if(confirm('সব ডাটা মুছে ফেলবেন? লগআউট হয়ে যাবে।')) {
                    localStorage.clear();
                    location.reload();
                }
            };

            window.showTable = function(division) {
                let html = `
                    <h3 style="margin-bottom: 30px; font-size: 28px;"><i class="fas fa-calendar-alt" style="margin-right: 15px;"></i>${division} · সেহরি ও ইফতার</h3>
                    <table class="schedule-table" style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: var(--primary-100);">
                                <th style="padding: 15px; border-radius: 15px 0 0 0;">রমজান</th>
                                <th style="padding: 15px;">তারিখ</th>
                                <th style="padding: 15px;">সেহরি</th>
                                <th style="padding: 15px; border-radius: 0 15px 0 0;">ইফতার</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                ramadanData[division].forEach(r => {
                    html += `
                        <tr style="border-bottom: 1px solid var(--border-light);">
                            <td style="padding: 12px; text-align: center;"><strong>${r.r}</strong></td>
                            <td style="padding: 12px; text-align: center;">${r.d}</td>
                            <td style="padding: 12px; text-align: center; color: var(--accent-500); font-weight: 600;">${r.s}</td>
                            <td style="padding: 12px; text-align: center; color: var(--primary-600); font-weight: 600;">${r.i}</td>
                        </tr>
                    `;
                });
                
                html += `
                        </tbody>
                    </table>
                    <button class="btn btn-secondary" style="margin-top: 30px;" onclick="openModal('cal')">← পিছনে</button>
                `;
                
                document.getElementById('modal-body').innerHTML = html;
            };

            function showPremiumCreator() {
                document.getElementById('modal-body').innerHTML = `
                    <div class="creator-profile">
                        <div class="creator-header" style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 50px; border-radius: 30px; color: white; margin-bottom: 30px;">
                            <img src="https://i.postimg.cc/yNhjsYJ4/1771310158774_01.jpg" alt="Shamiul Islam Borson" style="width: 150px; height: 150px; border-radius: 50%; border: 5px solid white; margin: 0 auto 20px; display: block;">
                            <div style="font-size: 32px; font-weight: 700; margin-bottom: 10px;">শামিউল ইসলাম বর্ষন</div>
                            <div style="font-size: 18px; opacity: 0.9;">Creator · DINISLAM</div>
                        </div>
                        
                        <div style="background: var(--surface-light); border-left: 4px solid var(--primary-500); padding: 30px; border-radius: 20px; margin: 30px 0; text-align: left;">
                            <p style="margin-bottom: 15px; font-size: 18px;">Building meaningful digital experiences for the Ummah. DINISLAM is designed as a comprehensive guide for Ramadan — Sehri and Iftar times, duas, tasbih and beneficial videos.</p>
                            <p style="font-size: 18px; color: var(--primary-600);">May this effort be a source of blessings.</p>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 30px 0;">
                            <div style="background: var(--surface-light); padding: 20px; border-radius: 15px; text-align: center;">
                                <div style="font-size: 28px; font-weight: 700; color: var(--primary-600);">৮+</div>
                                <div style="font-size: 14px; color: var(--neutral-500);">Projects</div>
                            </div>
                            <div style="background: var(--surface-light); padding: 20px; border-radius: 15px; text-align: center;">
                                <div style="font-size: 28px; font-weight: 700; color: var(--primary-600);">১০০০+</div>
                                <div style="font-size: 14px; color: var(--neutral-500);">Users</div>
                            </div>
                            <div style="background: var(--surface-light); padding: 20px; border-radius: 15px; text-align: center;">
                                <div style="font-size: 28px; font-weight: 700; color: var(--primary-600);">২৪/৭</div>
                                <div style="font-size: 14px; color: var(--neutral-500);">Support</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 15px; justify-content: center; margin: 30px 0;">
                            <a href="#" style="width: 55px; height: 55px; border-radius: 50%; background: var(--surface-light); color: var(--neutral-600); display: flex; align-items: center; justify-content: center; text-decoration: none; transition: all 0.3s;"><i class="fab fa-facebook-f fa-lg"></i></a>
                            <a href="#" style="width: 55px; height: 55px; border-radius: 50%; background: var(--surface-light); color: var(--neutral-600); display: flex; align-items: center; justify-content: center; text-decoration: none; transition: all 0.3s;"><i class="fab fa-github fa-lg"></i></a>
                            <a href="#" style="width: 55px; height: 55px; border-radius: 50%; background: var(--surface-light); color: var(--neutral-600); display: flex; align-items: center; justify-content: center; text-decoration: none; transition: all 0.3s;"><i class="fab fa-linkedin-in fa-lg"></i></a>
                        </div>
                        
                        <a href="https://fb.com/SI.Borson1" target="_blank" class="btn btn-primary" style="text-decoration: none; display: inline-block; width: auto; padding: 18px 45px; margin-top: 30px;"><i class="fab fa-facebook-f" style="margin-right: 10px;"></i>Facebook Profile</a>
                    </div>
                `;
            }

            function showVideoSearch() {
                document.getElementById('modal-body').innerHTML = `
                    <h3 style="margin-bottom: 30px; font-size: 28px;"><i class="fas fa-play-circle" style="margin-right: 15px;"></i>ইসলামিক ভিডিও সার্চ করুন</h3>
                    <div style="display: flex; gap: 16px; margin-bottom: 30px;">
                        <input type="text" id="searchQuery" class="input-field" placeholder="যেমন: রোজার নিয়ম, দোয়া">
                        <button class="btn btn-primary" style="width: auto; padding: 0 45px;" onclick="searchVideos()"><i class="fas fa-search"></i></button>
                    </div>
                    <div id="videoResults" class="video-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px;"></div>
                    <div id="videoPlayer" style="display: none;">
                        <div id="playerContainer"></div>
                        <button class="btn btn-secondary" style="margin-top: 25px;" onclick="showVideoSearch()">← ফিরে যান</button>
                    </div>
                `;
            }

            window.searchVideos = function() {
                let query = document.getElementById('searchQuery').value;
                if(!query) {
                    alert('অনুগ্রহ করে সার্চ টার্ম লিখুন');
                    return;
                }
                
                document.getElementById('videoResults').innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 50px;"><i class="fas fa-spinner fa-spin fa-3x"></i><p style="margin-top: 15px;">অনুসন্ধান চলছে...</p></div>';
                
                fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=12&q=${encodeURIComponent(query)}&type=video&key=AIzaSyArgYYff2pvPL-MDuHNtqOIN-uMw5vkIeg`)
                .then(r => r.json())
                .then(data => {
                    if(data.error) {
                        document.getElementById('videoResults').innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 50px;">ত্রুটি হয়েছে</div>';
                        return;
                    }
                    
                    let html = '';
                    data.items.forEach(item => {
                        html += `
                            <div class="video-item" onclick='playVideo("${item.id.videoId}", "${item.snippet.title.replace(/'/g, '')}")' style="background: white; border-radius: 20px; overflow: hidden; cursor: pointer; transition: all 0.3s; box-shadow: var(--shadow-md);">
                                <img src="${item.snippet.thumbnails.medium.url}" style="width: 100%; height: 140px; object-fit: cover;">
                                <div style="padding: 15px;">
                                    <div style="font-weight: 600; margin-bottom: 5px;">${item.snippet.title.substring(0, 40)}...</div>
                                    <div style="font-size: 13px; color: var(--neutral-500);">${item.snippet.channelTitle}</div>
                                </div>
                            </div>
                        `;
                    });
                    
                    document.getElementById('videoResults').innerHTML = html || '<div style="grid-column: 1/-1; text-align: center; padding: 50px;">কিছু পাওয়া যায়নি</div>';
                })
                .catch(() => {
                    document.getElementById('videoResults').innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 50px;">নেটওয়ার্ক সমস্যা</div>';
                });
            };

            window.playVideo = function(id, title) {
                document.getElementById('videoResults').style.display = 'none';
                let player = document.getElementById('videoPlayer');
                player.style.display = 'block';
                document.getElementById('playerContainer').innerHTML = `
                    <h4 style="margin-bottom: 20px; font-size: 22px;">${title}</h4>
                    <iframe width="100%" height="400" src="https://www.youtube.com/embed/${id}" frameborder="0" style="border-radius: 20px;" allowfullscreen></iframe>
                `;
            };

            // Friends System - Fixed Functions
            function showFriendsUI() {
                let html = `
                    <div class="friends-container">
                        <div class="friends-sidebar">
                            <h3 style="margin-bottom: 25px; font-size: 24px;"><i class="fas fa-users" style="margin-right: 10px;"></i>বন্ধু তালিকা</h3>
                            <input type="text" class="friends-search" placeholder="🔍 খুঁজুন..." id="friendSearch" onkeyup="searchFriends()">
                            <ul class="friends-list" id="friendsList">
                                ${renderFriendsList()}
                            </ul>
                            <button class="add-friend-btn" onclick="addNewFriend()">
                                <i class="fas fa-plus" style="margin-right: 8px;"></i> নতুন বন্ধু যোগ করুন
                            </button>
                        </div>
                        <div class="chat-area" id="chatArea">
                            ${currentFriend ? renderChatArea() : '<div style="display: flex; align-items: center; justify-content: center; height: 100%; color: var(--neutral-400); flex-direction: column;"><i class="fas fa-comments fa-3x" style="margin-bottom: 15px;"></i><p>বন্ধু নির্বাচন করুন</p></div>'}
                        </div>
                    </div>
                `;
                document.getElementById('modal-body').innerHTML = html;
                
                // Auto scroll to bottom if chat area exists
                if(currentFriend) {
                    setTimeout(() => {
                        let chatArea = document.getElementById('friendChatMessages');
                        if(chatArea) chatArea.scrollTop = chatArea.scrollHeight;
                    }, 100);
                }
            }

            function renderFriendsList() {
                if(friends.length === 0) {
                    return '<li style="text-align: center; color: var(--neutral-400); padding: 30px;">কোনো বন্ধু নেই</li>';
                }
                return friends.map((f, index) => `
                    <li class="friend-item ${currentFriend && currentFriend.number === f.number ? 'active' : ''}" onclick="selectFriend(${index})">
                        <div class="friend-avatar">${f.name.charAt(0).toUpperCase()}</div>
                        <div class="friend-info">
                            <h4>${f.name}</h4>
                            <p>${f.number}</p>
                            ${getUnreadCount(f.number) ? `<span style="background: var(--accent-500); color: white; border-radius: 20px; padding: 2px 8px; font-size: 11px; margin-left: 10px;">${getUnreadCount(f.number)}</span>` : ''}
                        </div>
                        <i class="fas fa-trash" style="margin-left: auto; opacity: 0.5; cursor: pointer;" onclick="event.stopPropagation(); deleteFriend('${f.number}')" title="ডিলিট"></i>
                    </li>
                `).join('');
            }

            function getUnreadCount(number) {
                // This would need unread tracking - simplified version
                return 0;
            }

            function renderChatArea() {
                if(!currentFriend) return '';
                
                // Get messages for current friend
                let friendMessages = messages[currentFriend.number] || [];
                
                return `
                    <div class="chat-header">
                        <h3><i class="fas fa-user-circle" style="margin-right: 10px;"></i>${currentFriend.name}</h3>
                        <p style="color: var(--neutral-500);">${currentFriend.number}</p>
                    </div>
                    <div class="chat-messages-area" id="friendChatMessages">
                        ${friendMessages.length > 0 ? friendMessages.map(msg => `
                            <div class="message-friend ${msg.sent ? 'sent' : 'received'}">
                                ${msg.text}
                                <div class="message-time">${msg.time || new Date().toLocaleTimeString('bn-BD', { hour: '2-digit', minute: '2-digit' })}</div>
                            </div>
                        `).join('') : '<div style="text-align: center; color: var(--neutral-400); padding: 40px;"><i class="fas fa-comment-dots fa-2x" style="margin-bottom: 10px;"></i><p>কোনো মেসেজ নেই</p></div>'}
                    </div>
                    <div class="chat-input-area-friend">
                        <input type="text" class="chat-input" id="friendMessageInput" placeholder="মেসেজ লিখুন..." onkeypress="if(event.key==='Enter') sendFriendMessage()">
                        <button class="chat-send" onclick="sendFriendMessage()"><i class="fas fa-paper-plane"></i></button>
                    </div>
                `;
            }

            window.selectFriend = function(index) {
                currentFriend = friends[index];
                showFriendsUI();
                
                // Mark messages as read if needed
                if(messages[currentFriend.number]) {
                    // Update unread status
                }
            };

            window.addNewFriend = function() {
                let name = prompt('বন্ধুর নাম লিখুন:');
                if(!name) return;
                let number = prompt('মোবাইল নম্বর লিখুন (১১ ডিজিট):');
                if(!number || number.length < 11) {
                    alert('সঠিক মোবাইল নম্বর দিন');
                    return;
                }
                
                // Check if friend already exists
                let exists = friends.some(f => f.number === number);
                if(exists) {
                    alert('এই নম্বর আগেই যোগ করা হয়েছে!');
                    return;
                }
                
                friends.push({ name, number });
                localStorage.setItem('friends', JSON.stringify(friends));
                showFriendsUI();
            };

            window.deleteFriend = function(number) {
                if(confirm('এই বন্ধুকে ডিলিট করবেন?')) {
                    friends = friends.filter(f => f.number !== number);
                    localStorage.setItem('friends', JSON.stringify(friends));
                    
                    // Also delete their messages
                    delete messages[number];
                    localStorage.setItem('friendMessages', JSON.stringify(messages));
                    
                    if(currentFriend && currentFriend.number === number) {
                        currentFriend = null;
                    }
                    
                    showFriendsUI();
                }
            };

            window.sendFriendMessage = function() {
                let input = document.getElementById('friendMessageInput');
                let msg = input.value.trim();
                if(!msg || !currentFriend) {
                    alert('কোনো বন্ধু নির্বাচন করেননি বা মেসেজ খালি!');
                    return;
                }
                
                // Initialize messages array for this friend if doesn't exist
                if(!messages[currentFriend.number]) {
                    messages[currentFriend.number] = [];
                }
                
                // Add message
                let newMessage = {
                    text: msg,
                    sent: true,
                    time: new Date().toLocaleTimeString('bn-BD', { hour: '2-digit', minute: '2-digit' })
                };
                
                messages[currentFriend.number].push(newMessage);
                localStorage.setItem('friendMessages', JSON.stringify(messages));
                
                // Clear input
                input.value = '';
                
                // Update chat area immediately
                let chatArea = document.getElementById('chatArea');
                if(chatArea) {
                    chatArea.innerHTML = renderChatArea();
                }
                
                // Auto scroll to bottom
                setTimeout(() => {
                    let chatMessagesArea = document.getElementById('friendChatMessages');
                    if(chatMessagesArea) {
                        chatMessagesArea.scrollTop = chatMessagesArea.scrollHeight;
                    }
                }, 100);
                
                // Simulate reply (optional - for testing)
                setTimeout(() => {
                    simulateReply();
                }, 3000);
            };

            // Simulate reply from friend (for testing)
            function simulateReply() {
                if(!currentFriend) return;
                
                let replies = [
                    'ওয়ালাইকুম আসসালাম',
                    'জাজাকাল্লাহ খাইর',
                    'আলহামদুলিল্লাহ',
                    'ঠিক আছে, ধন্যবাদ',
                    'আপনার জন্যও দোয়া করি',
                    'ইনশাআল্লাহ'
                ];
                
                let randomReply = replies[Math.floor(Math.random() * replies.length)];
                
                if(!messages[currentFriend.number]) {
                    messages[currentFriend.number] = [];
                }
                
                let replyMessage = {
                    text: randomReply,
                    sent: false,
                    time: new Date().toLocaleTimeString('bn-BD', { hour: '2-digit', minute: '2-digit' })
                };
                
                messages[currentFriend.number].push(replyMessage);
                localStorage.setItem('friendMessages', JSON.stringify(messages));
                
                // Update chat area
                let chatArea = document.getElementById('chatArea');
                if(chatArea) {
                    chatArea.innerHTML = renderChatArea();
                }
                
                // Auto scroll to bottom
                setTimeout(() => {
                    let chatMessagesArea = document.getElementById('friendChatMessages');
                    if(chatMessagesArea) {
                        chatMessagesArea.scrollTop = chatMessagesArea.scrollHeight;
                    }
                }, 100);
            }

            // Search friends
            window.searchFriends = function() {
                let searchTerm = document.getElementById('friendSearch').value.toLowerCase();
                let friendsList = document.getElementById('friendsList');
                
                if(!friendsList) return;
                
                let filteredFriends = friends.filter(f => 
                    f.name.toLowerCase().includes(searchTerm) || 
                    f.number.includes(searchTerm)
                );
                
                if(filteredFriends.length === 0) {
                    friendsList.innerHTML = '<li style="text-align: center; color: var(--neutral-400); padding: 30px;">কোনো বন্ধু পাওয়া যায়নি</li>';
                } else {
                    friendsList.innerHTML = filteredFriends.map((f, index) => {
                        let originalIndex = friends.findIndex(orig => orig.number === f.number);
                        return `
                            <li class="friend-item ${currentFriend && currentFriend.number === f.number ? 'active' : ''}" onclick="selectFriend(${originalIndex})">
                                <div class="friend-avatar">${f.name.charAt(0).toUpperCase()}</div>
                                <div class="friend-info">
                                    <h4>${f.name}</h4>
                                    <p>${f.number}</p>
                                </div>
                                <i class="fas fa-trash" style="margin-left: auto; opacity: 0.5; cursor: pointer;" onclick="event.stopPropagation(); deleteFriend('${f.number}')" title="ডিলিট"></i>
                            </li>
                        `;
                    }).join('');
                }
            };

            // Clear all messages for a friend
            window.clearFriendMessages = function(number) {
                if(confirm('সব মেসেজ মুছে ফেলবেন?')) {
                    messages[number] = [];
                    localStorage.setItem('friendMessages', JSON.stringify(messages));
                    
                    if(currentFriend && currentFriend.number === number) {
                        let chatArea = document.getElementById('chatArea');
                        if(chatArea) {
                            chatArea.innerHTML = renderChatArea();
                        }
                    } else {
                        showFriendsUI();
                    }
                }
            };

            function renderTasUI() {
                let body = document.getElementById('modal-body');
                body.innerHTML = `
                    <div class="tasbih-container">
                        <h3 style="margin-bottom: 30px; font-size: 28px;"><i class="fas fa-circle" style="margin-right: 15px;"></i>ডিজিটাল তসবিহ</h3>
                        <div class="tasbih-tabs">
                            <button class="tasbih-tab ${currentTasMode == 'regular' ? 'active' : ''}" onclick="switchTasMode('regular')">নিয়মিত</button>
                            <button class="tasbih-tab ${currentTasMode == 'general' ? 'active' : ''}" onclick="switchTasMode('general')">সাধারণ</button>
                        </div>
                        
                        <div class="tasbih-counter" onclick="handleTasClick()">
                            <svg class="progress-ring" width="300" height="300">
                                <circle cx="150" cy="150" r="140" stroke="var(--primary-300)" stroke-width="8" fill="transparent"/>
                                <circle cx="150" cy="150" r="140" stroke="var(--primary-500)" stroke-width="8" fill="transparent" stroke-dasharray="879" stroke-dashoffset="879" style="transition: stroke-dashoffset 0.3s;" id="progressCircle"/>
                            </svg>
                            <div class="tasbih-circle">
                                <div class="tasbih-count" id="tVal">${currentTasMode == 'regular' ? tasCount : generalTasCount}</div>
                                <div class="tasbih-label" id="targetLabel">${currentTasMode == 'regular' ? getRegularLabel(tasCount) : 'জিকির'}</div>
                            </div>
                        </div>
                        
                        <button class="btn btn-secondary" style="margin-top: 30px;" onclick="resetCurrentTas()"><i class="fas fa-redo" style="margin-right: 10px;"></i>রিসেট</button>
                    </div>
                `;
                updateTasProgress();
            }

            window.switchTasMode = function(mode) { 
                currentTasMode = mode; 
                renderTasUI(); 
            };

            window.handleTasClick = function() {
                if(currentTasMode == 'regular') { 
                    tasCount++; 
                    localStorage.setItem('tasCount', tasCount); 
                    document.getElementById('tVal').innerText = tasCount; 
                    document.getElementById('targetLabel').innerText = getRegularLabel(tasCount); 
                } else { 
                    generalTasCount++; 
                    localStorage.setItem('generalTasCount', generalTasCount); 
                    document.getElementById('tVal').innerText = generalTasCount; 
                }
                updateTasProgress(); 
                if(navigator.vibrate) navigator.vibrate(30);
            };

            window.resetCurrentTas = function() {
                if(confirm('রিসেট নিশ্চিত?')) {
                    if(currentTasMode == 'regular') { 
                        tasCount = 0; 
                        localStorage.setItem('tasCount', 0); 
                    } else { 
                        generalTasCount = 0; 
                        localStorage.setItem('generalTasCount', 0); 
                    }
                    renderTasUI();
                }
            };

            function updateTasProgress() {
                let circle = document.getElementById('progressCircle');
                if(!circle) return;
                
                let circumference = 2 * Math.PI * 140;
                let c = (currentTasMode == 'regular') ? (tasCount % 33) : (generalTasCount % 100);
                let max = (currentTasMode == 'regular' ? 33 : 100);
                let offset = circumference - (c / max) * circumference;
                
                circle.style.strokeDasharray = `${circumference} ${circumference}`;
                circle.style.strokeDashoffset = offset;
            }

            window.liveZak = function() { 
                let value = document.getElementById('cash')?.value || 0; 
                document.getElementById('zRes').innerHTML = Math.floor(value * 0.025).toLocaleString('bn-BD') + ' টাকা'; 
            };

            window.toggleSideOptions = function() { 
                let options = document.getElementById('sideOptions'); 
                options.style.display = options.style.display === 'flex' ? 'none' : 'flex'; 
            };

            window.toggleDarkMode = function() { 
                document.body.classList.toggle('dark-mode'); 
                toggleSideOptions();
            };

            window.logout = function() { 
                if(confirm('লগআউট করবেন?')) {
                    localStorage.clear(); 
                    location.reload(); 
                }
            };

            window.closeModal = function() { 
                document.getElementById('modal').style.display = 'none'; 
            };

            // Date and Timer
            function updateCurrentDate() {
                let today = new Date(); 
                let start = new Date("February 19, 2026 00:00:00").getTime(); 
                let now = today.getTime(); 
                let diff = Math.ceil((start - now) / (86400000));
                
                let dLabel = document.getElementById('currentDateLabel'); 
                let dNum = document.getElementById('currentDayNumber'); 
                let dMonth = document.getElementById('currentMonthName');
                
                if(diff === 1) { 
                    dLabel.innerText = 'আগামীকাল'; 
                    dNum.innerText = '১'; 
                    dMonth.innerText = 'রমজান'; 
                } else if(diff <= 0) { 
                    let rd = Math.abs(diff) + 1; 
                    dLabel.innerText = 'আজ'; 
                    dNum.innerText = rd.toLocaleString('bn-BD'); 
                    dMonth.innerText = 'রমজান'; 
                } else { 
                    dLabel.innerText = 'আজ'; 
                    dNum.innerText = (30 - diff).toLocaleString('bn-BD'); 
                    dMonth.innerText = 'শাবান'; 
                }
            }

            setInterval(() => {
                let target = new Date("March 20, 2026 18:15:00").getTime(); 
                let diff = target - new Date().getTime();
                
                if(document.getElementById('days')) {
                    document.getElementById('days').innerText = Math.max(0, Math.floor(diff / 86400000)).toLocaleString('bn-BD');
                    document.getElementById('hours').innerText = Math.max(0, Math.floor((diff % 86400000) / 3600000)).toLocaleString('bn-BD');
                    document.getElementById('mins').innerText = Math.max(0, Math.floor((diff % 3600000) / 60000)).toLocaleString('bn-BD');
                    document.getElementById('secs').innerText = Math.max(0, Math.floor((diff % 60000) / 1000)).toLocaleString('bn-BD');
                }
                updateCurrentDate();
            }, 1000);

            // Chat - Only on main page
            window.toggleChat = function() { 
                let chat = document.getElementById('chatWindow'); 
                chat.style.display = chat.style.display === 'flex' ? 'none' : 'flex'; 
                if(chat.style.display === 'flex' && !document.querySelector('.suggested-questions')) { 
                    addSuggested(); 
                }
            };

            function addSuggested() {
                let messages = document.getElementById('chatMessages'); 
                if(document.querySelector('.suggested-questions')) return;
                
                let div = document.createElement('div'); 
                div.className = 'suggested-questions'; 
                div.innerHTML = `
                    <span class="suggested-q" onclick="sendSuggested('রোজার সঠিক নিয়ম')">🌙 রোজার নিয়ম</span>
                    <span class="suggested-q" onclick="sendSuggested('ইফতারের দোয়া')">🍽️ ইফতারের দোয়া</span>
                    <span class="suggested-q" onclick="sendSuggested('সেহরির সময়')">⏰ সেহরির সময়</span>
                    <span class="suggested-q" onclick="sendSuggested('তাহাজ্জুদ নামাজ')">🕌 তাহাজ্জুদ</span>
                    <span class="suggested-q" onclick="sendSuggested('লাইলাতুল কদর')">✨ লাইলাতুল কদর</span>
                `;
                messages.appendChild(div);
            }

            window.sendSuggested = function(q) { 
                document.getElementById('chatInput').value = q; 
                sendMessage(); 
            };

            window.sendMessage = async function() {
                let input = document.getElementById('chatInput'); 
                let msg = input.value.trim(); 
                if(!msg) return;
                
                let chat = document.getElementById('chatMessages');
                let suggested = document.querySelector('.suggested-questions'); 
                if(suggested) suggested.remove();
                
                chat.innerHTML += `<div class="message user-message">${msg}</div>`;
                input.value = ''; 
                chat.scrollTop = chat.scrollHeight;
                
                let typing = document.createElement('div'); 
                typing.className = 'message bot-message'; 
                typing.innerText = 'ROVEX টাইপ করছে...'; 
                typing.id = 'typing'; 
                chat.appendChild(typing);
                
                try {
                    let res = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Authorization': 'Bearer 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',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ 
                            model: 'llama-3.3-70b-versatile', 
                            messages: [
                                {role: 'system', content: 'তুমি ROVEX, একটি ইসলামিক সহায়ক। সবসময় বাংলায় সংক্ষিপ্ত উত্তর দাও। কোনো ইমোজি নয়।'},
                                {role: 'user', content: msg}
                            ], 
                            temperature: 0.7 
                        })
                    });
                    
                    document.getElementById('typing')?.remove();
                    let data = await res.json();
                    let reply = data.choices?.[0]?.message?.content || 'আমি বুঝতে পারিনি। আবার বলবেন?';
                    chat.innerHTML += `<div class="message bot-message">${reply}</div>`;
                } catch {
                    document.getElementById('typing')?.remove(); 
                    chat.innerHTML += `<div class="message bot-message">সাময়িক সমস্যা। পরে চেষ্টা করুন।</div>`;
                }
                chat.scrollTop = chat.scrollHeight;
            };

            // Initialize
            if(localStorage.getItem('userMobile') && localStorage.getItem('userName')) {
                document.getElementById('login-page').style.display = 'none';
                document.getElementById('welcome-page').style.display = 'flex';
                document.getElementById('displayUserName').innerText = localStorage.getItem('userName');
                document.getElementById('welcomeMessage').innerHTML = `
                    <p><i class="fas fa-smile" style="color: var(--primary-500); margin-right: 8px;"></i> শুভ দিন, ${localStorage.getItem('userName')}।</p>
                    <p>রমজানের প্রস্তুতি নিন DINISLAM নিয়ে।</p>
                    <p style="color: var(--primary-600); font-weight: 600;">আল্লাহ আপনার সব নেক কাজ কবুল করুন।</p>
                `;
            }
        })();
    </script>
</body>
    </html>
